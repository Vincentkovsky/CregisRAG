2025-05-17 00:00:44,157 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:00:44,157 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:00:44,157 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:00:44,160 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:00:44,160 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:00:44,160 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:02:41,671 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:02:41,672 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:02:41,672 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:02:41,676 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:02:41,676 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:02:41,676 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:02:42,162 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:02:42,162 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:02:42,162 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:02:42,166 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:02:42,166 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:02:42,167 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:03:27,468 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:03:27,468 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:03:27,468 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:03:27,472 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:03:27,472 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:03:27,472 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:04:41,138 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:04:41,138 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:04:41,138 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:04:41,142 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:04:41,142 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:04:41,142 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:04:44,581 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:04:44,581 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:04:44,581 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:04:44,584 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:04:44,584 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:04:44,584 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:06:55,900 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:06:55,901 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:06:55,901 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:06:55,904 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:06:55,904 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:06:55,904 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:09:14,260 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:09:14,260 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:09:14,260 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:09:14,263 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:09:14,263 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:09:14,263 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:09:14,294 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:09:14,294 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:09:14,294 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:09:14,439 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:09:14,481 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:09:14,481 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:09:14,481 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:09:14,481 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:09:14,495 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:09:14,495 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:09:14,495 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:09:14,495 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:09:15,093 - app.core.retrieval.vector_store - INFO - 已创建新集合: documents
2025-05-17 00:09:15,093 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:09:15,093 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:10:24,639 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:24,640 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:24,668 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:24,668 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:24,674 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:24,674 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:24,679 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:24,679 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:25,410 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:25,410 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:25,423 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:25,423 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:25,430 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:25,430 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:25,438 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:25,438 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,084 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,084 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,099 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,099 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,106 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,106 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,113 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,113 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,648 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,648 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,662 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,663 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,671 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,671 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:26,678 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:26,678 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:27,276 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:27,276 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:27,288 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:27,288 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:27,297 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:27,297 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:27,306 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:27,306 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:28,530 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:10:28,530 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/ingest.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:28,540 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:10:28,541 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/ingest.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:28,549 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:10:28,550 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/ingest.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:28,556 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:10:28,556 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/ingest.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,538 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,538 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,549 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,550 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,554 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,555 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,562 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,562 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,567 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,567 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,573 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,573 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,578 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,578 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:10:30,583 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:10:30,583 - app.api.main - ERROR - 未处理的异常: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
Traceback (most recent call last):
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/vincentjin/miniconda3/envs/CregisRAG/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/vincentjin/CodingProject/CregisRAG/app/api/routes/admin.py", line 40, in get_rag_engine
    rag_engine = create_rag_engine(rag_config)
  File "/Users/vincentjin/CodingProject/CregisRAG/app/core/rag_engine.py", line 684, in create_rag_engine
    return RAGEngine(config)
TypeError: RAGEngine.__init__() missing 3 required positional arguments: 'llm_service', 'embedding_service', and 'storage_service'
2025-05-17 00:13:37,605 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:13:38,071 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:13:38,071 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:13:38,071 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:13:38,074 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:13:38,075 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:13:38,075 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:13:38,104 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:13:38,104 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:13:38,104 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:13:38,239 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:13:38,313 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:13:38,313 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:13:38,313 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:13:38,313 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:13:38,328 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:13:38,328 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:13:38,328 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:13:38,328 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:13:38,745 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:13:38,745 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:13:38,745 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:14:06,939 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:14:07,294 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:14:07,294 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:14:07,294 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:14:07,297 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:14:07,297 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:14:07,297 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:14:07,325 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:14:07,326 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:14:07,326 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:14:07,402 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:14:07,432 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:14:07,432 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:14:07,432 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:14:07,432 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:14:07,445 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:14:07,445 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:14:07,445 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:14:07,445 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:14:07,752 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:14:07,752 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:14:07,752 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:14:38,890 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:14:51,151 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:14:51,151 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:14:51,151 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:14:51,155 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:14:51,155 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:14:51,155 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:14:51,188 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:14:51,188 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:14:51,188 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:14:51,305 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:14:51,347 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:14:51,347 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:14:51,347 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:14:51,347 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:14:51,517 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:14:51,517 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:14:51,518 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:14:51,518 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:14:52,006 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:14:52,006 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:14:52,006 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:15:02,362 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:15:02,362 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:15:02,362 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:15:02,362 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:15:02,362 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:15:02,377 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:15:02,377 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:15:02,377 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:15:02,377 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:15:02,392 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:15:02,392 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:15:02,392 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:15:02,392 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:15:02,394 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:02,394 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:15:02,394 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:15:02,394 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:15:02,408 - app.core.retrieval.vector_store - INFO - 已创建新集合: documents
2025-05-17 00:15:02,408 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:15:02,408 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:15:02,408 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:15:02,408 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:15:02,424 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:15:02,424 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:15:02,425 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:02,426 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:15:02,426 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:15:19,239 - app.api.routes.admin - WARNING - 获取向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 00:15:21,454 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:15:21,454 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:15:21,458 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:15:21,458 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:15:21,458 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:15:21,458 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:15:21,458 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:15:21,458 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:15:21,458 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:15:21,462 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:21,462 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:15:21,462 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:15:21,462 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:15:21,463 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:15:21,598 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:15:21,598 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:15:21,600 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:21,600 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:15:21,600 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:15:21,604 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:21,636 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:21,651 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:21,659 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:22,526 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:22,531 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:22,536 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:22,541 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:24,692 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:25,842 - app.core.retrieval.vector_store - INFO - 已检索 0 个文档的元数据
2025-05-17 00:15:31,914 - app.api.routes.ingest - INFO - 开始处理文档: 2ddc52fb-4e59-493a-a373-67df2b235774
2025-05-17 00:15:31,914 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf
2025-05-17 00:15:31,982 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf, 提取了 1918 字符, 耗时: 0.07秒
2025-05-17 00:15:31,982 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1918, 生成块数=3
2025-05-17 00:15:31,983 - app.core.ingest.ingest_service - INFO - 文档被分成 3 个块
2025-05-17 00:15:32,249 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:15:32,348 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.36秒
2025-05-17 00:15:32,373 - app.core.retrieval.vector_store - INFO - 已添加 3 个文档到Chroma, 耗时: 0.03秒
2025-05-17 00:15:32,373 - app.core.ingest.ingest_service - INFO - 已向量化并存储 3 个文本块
2025-05-17 00:15:32,374 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf, 耗时: 0.46秒
2025-05-17 00:15:32,374 - app.api.routes.ingest - INFO - 文档处理完成: 2ddc52fb-4e59-493a-a373-67df2b235774
2025-05-17 00:15:35,528 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:15:35,537 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:15:35,545 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:15:35,550 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:15:42,906 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:15:42,906 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:15:42,907 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:15:42,907 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:15:42,907 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:15:42,907 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:15:42,908 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:15:42,908 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:15:42,908 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:15:42,911 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:42,912 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:15:42,912 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:15:42,912 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:15:42,912 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:15:42,934 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:15:42,934 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:15:42,937 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:15:42,937 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:15:42,937 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:15:42,939 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:15:42,939 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:15:42,939 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:15:42,940 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:15:43,220 - jieba - DEBUG - Loading model cost 0.281 seconds.
2025-05-17 00:15:43,220 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:15:43,681 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:15:43,779 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.35秒
2025-05-17 00:15:43,780 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:15:43,780 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:15:43,780 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:15:43,780 - app.core.rag_engine - ERROR - 处理查询时出错: 'LLMService' object has no attribute 'client'
2025-05-17 00:16:25,411 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:16:25,889 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:16:25,889 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:16:25,889 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:16:25,892 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:16:25,892 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:16:25,892 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:16:25,921 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:16:25,921 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:16:25,921 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:16:26,041 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:16:26,082 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:16:26,082 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:16:26,082 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:16:26,082 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:16:26,095 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:16:26,095 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:16:26,095 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:16:26,095 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:16:26,495 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:16:26,495 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:16:26,495 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:16:35,593 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:16:35,874 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:16:35,874 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:16:35,874 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:16:35,877 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:16:35,878 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:16:35,878 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:16:35,903 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:16:35,903 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:16:35,903 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:16:35,980 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:16:36,011 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:16:36,011 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:16:36,011 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:16:36,011 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:16:36,025 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:16:36,026 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:16:36,026 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:16:36,029 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:16:36,423 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:16:36,423 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:16:36,423 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:17:10,104 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:17:10,104 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:17:10,111 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:17:10,111 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:17:10,111 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:17:10,113 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:17:10,114 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:17:10,114 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:17:10,114 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:17:10,128 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:17:10,128 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:17:10,128 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:17:10,128 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:17:10,128 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:17:10,160 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:17:10,160 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:17:10,163 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:17:10,163 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:17:10,163 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:17:10,179 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:10,195 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:10,205 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:10,213 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:18,709 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:18,713 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:18,721 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:18,725 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:30,660 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:30,667 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:30,674 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:17:30,679 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:18:08,407 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:18:08,858 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:18:08,858 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:18:08,858 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:18:08,861 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:18:08,861 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:18:08,861 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:18:08,890 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:18:08,890 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:18:08,891 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:18:09,020 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:09,062 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:18:09,062 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:18:09,062 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:18:09,062 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:09,076 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:18:09,076 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:18:09,076 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:18:09,076 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:18:09,455 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:18:09,455 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:18:09,455 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:18:19,655 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:18:28,241 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:18:28,241 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:18:28,241 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:18:28,244 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:18:28,244 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:18:28,244 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:18:28,272 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:18:28,272 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:18:28,272 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:18:28,380 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:28,420 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:18:28,420 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:18:28,420 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:18:28,420 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:28,433 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:18:28,433 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:18:28,433 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:18:28,433 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:18:28,835 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:18:28,835 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:18:28,835 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:18:37,252 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:18:37,253 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:18:37,253 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:18:37,253 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:18:37,253 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:37,267 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:18:37,267 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:18:37,267 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:18:37,267 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:37,282 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:18:37,282 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:18:37,282 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:18:37,282 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:18:37,283 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:18:37,284 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:18:37,284 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:18:37,284 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:18:37,290 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:18:37,290 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:18:37,290 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:18:37,290 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:18:37,290 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:18:37,306 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:18:37,306 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:18:37,308 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:18:37,308 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:18:37,308 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:18:44,060 - app.api.routes.admin - WARNING - 检查向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 00:18:44,060 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:18:45,589 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:18:45,592 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.53秒
2025-05-17 00:18:46,223 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:18:46,273 - app.core.embedding.embedding_service - INFO - 嵌入完成: 2 个文本, 耗时: 0.68秒
2025-05-17 00:19:11,216 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:19:11,217 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:19:11,219 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:19:11,220 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:19:11,220 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:19:11,220 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:19:11,220 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:19:11,220 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:19:11,220 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:19:11,225 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:19:11,225 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:19:11,225 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:19:11,225 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:19:11,225 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:19:11,245 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:19:11,245 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:19:11,248 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:19:11,248 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:19:11,248 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:19:11,262 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:19:11,268 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:19:11,273 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:19:11,277 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:19:14,958 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:19:14,958 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:19:14,959 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:19:14,959 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:19:14,959 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:19:14,959 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:19:14,959 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:19:14,959 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:19:14,959 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:19:14,964 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:19:14,964 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:19:14,964 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:19:14,964 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:19:14,964 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:19:14,990 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:19:14,990 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:19:14,992 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:19:14,992 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:19:14,993 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:19:14,994 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:19:14,994 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:19:14,994 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:19:14,994 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:19:15,271 - jieba - DEBUG - Loading model cost 0.277 seconds.
2025-05-17 00:19:15,271 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:19:15,757 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:19:15,864 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.38秒
2025-05-17 00:19:15,864 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:19:15,865 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:19:15,865 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:19:15,865 - app.core.rag_engine - ERROR - 处理查询时出错: LLM客户端未初始化
2025-05-17 00:21:02,221 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:21:02,636 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:02,636 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:02,636 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:21:02,640 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:02,640 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:02,640 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:21:02,674 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:21:02,675 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:21:02,675 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:21:02,787 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:02,827 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:21:02,827 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:21:02,827 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:21:02,827 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:02,841 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:21:02,841 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:21:02,841 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:21:02,841 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:21:03,216 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:21:03,216 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:21:03,216 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:21:33,930 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:21:34,231 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:34,232 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:34,232 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:21:34,235 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:34,235 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:34,235 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:21:34,261 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:21:34,261 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:21:34,261 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:21:34,340 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:34,370 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:21:34,370 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:21:34,370 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:21:34,370 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:34,383 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:21:34,384 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:21:34,384 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:21:34,384 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:21:34,684 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:21:34,684 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:21:34,685 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:21:46,604 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:21:56,163 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:56,163 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:56,163 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:21:56,166 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:21:56,166 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:21:56,166 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:21:56,192 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:21:56,192 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:21:56,192 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:21:56,273 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:56,303 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:21:56,303 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:21:56,303 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:21:56,303 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:21:56,316 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:21:56,316 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:21:56,316 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:21:56,316 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:21:56,622 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:21:56,622 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:21:56,622 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:21:59,367 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:21:59,950 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:21:59,951 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 0.58秒
2025-05-17 00:22:08,518 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:22:08,518 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:22:08,519 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:22:08,519 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:22:08,519 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:22:08,519 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:22:08,519 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:22:08,519 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:22:08,519 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:22:08,519 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:08,534 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:22:08,534 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:22:08,535 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:22:08,535 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:08,549 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:22:08,549 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:22:08,549 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:22:08,554 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:22:08,554 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:22:08,554 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:22:08,554 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:22:08,554 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:08,568 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:22:08,568 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:22:08,570 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:22:08,571 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:22:08,571 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:22:08,571 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 00:22:08,571 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 00:22:08,572 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:22:08,572 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:22:08,850 - jieba - DEBUG - Loading model cost 0.278 seconds.
2025-05-17 00:22:08,851 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:22:09,320 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:22:09,404 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.32秒
2025-05-17 00:22:09,404 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 00:22:09,404 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:22:09,404 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:22:09,405 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:22:11,470 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:22:11,471 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.07秒
2025-05-17 00:22:11,471 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.90秒
2025-05-17 00:22:33,919 - app.api.routes.query - INFO - 接收到查询: 你好，介绍一下你自己
2025-05-17 00:22:33,919 - app.core.rag_engine - INFO - 开始处理查询: 你好，介绍一下你自己
2025-05-17 00:22:34,479 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:22:34,563 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.64秒
2025-05-17 00:22:34,563 - app.core.rag_engine - INFO - 开始检索文档: 你好，介绍一下你自己
2025-05-17 00:22:34,563 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:22:34,563 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:22:34,563 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:22:36,486 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:22:36,488 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.92秒
2025-05-17 00:22:36,488 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.57秒
2025-05-17 00:22:44,551 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:22:44,551 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:22:44,836 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:22:44,923 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.37秒
2025-05-17 00:22:44,923 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:22:44,923 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:22:44,923 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:22:44,923 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:22:47,310 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:22:47,312 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.39秒
2025-05-17 00:22:47,312 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.76秒
2025-05-17 00:22:56,465 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:22:56,465 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:22:56,466 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:22:56,466 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:22:56,466 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:22:56,466 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:22:56,466 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:22:56,466 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:22:56,467 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:22:56,467 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:56,563 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:22:56,563 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:22:56,563 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:22:56,563 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:56,579 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:22:56,579 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:22:56,579 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:22:56,582 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:22:56,582 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:22:56,582 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:22:56,583 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:22:56,583 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:22:56,615 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:22:56,615 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:22:56,616 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:22:56,616 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:22:56,616 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:22:56,625 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:56,630 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:56,633 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:56,637 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:59,084 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:59,091 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:59,099 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:22:59,104 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:23:01,891 - app.core.retrieval.vector_store - INFO - 已检索 3 个文档的元数据
2025-05-17 00:23:08,388 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:23:08,389 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:23:08,389 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:23:08,390 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:23:08,390 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:23:08,390 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:23:10,287 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:23:10,290 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.90秒
2025-05-17 00:23:10,290 - app.core.rag_engine - INFO - 查询处理完成，耗时: 1.90秒
2025-05-17 00:23:19,595 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:23:19,985 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:23:19,985 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:23:19,985 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:23:19,988 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:23:19,988 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:23:19,988 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:23:20,015 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:23:20,015 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:23:20,015 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:23:20,125 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:23:20,165 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:23:20,165 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:23:20,165 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:23:20,165 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:23:20,178 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:23:20,178 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:23:20,178 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:23:20,178 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:23:20,545 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:23:20,545 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:23:20,545 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:24:34,808 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:24:34,808 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:24:34,810 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:24:34,810 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:24:34,810 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:24:34,810 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:24:34,810 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:24:34,810 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:24:34,810 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:24:34,810 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:24:34,835 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:24:34,835 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:24:34,836 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:24:34,836 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:24:34,855 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:24:34,855 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:24:34,855 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:24:34,862 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:24:34,862 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:24:34,862 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:24:34,862 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:24:34,862 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:24:34,878 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:24:34,878 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:24:34,879 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:24:34,879 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:24:34,879 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:24:34,880 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 00:24:34,880 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 00:24:34,880 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:24:34,881 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:24:35,145 - jieba - DEBUG - Loading model cost 0.264 seconds.
2025-05-17 00:24:35,145 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:24:35,998 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:24:36,080 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.72秒
2025-05-17 00:24:36,080 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 00:24:36,080 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:24:36,080 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:24:36,081 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:24:38,539 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:24:38,539 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:24:38,681 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:24:38,743 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:24:38,746 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.67秒
2025-05-17 00:24:38,746 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.87秒
2025-05-17 00:24:38,769 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.23秒
2025-05-17 00:24:38,770 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:24:38,770 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:24:38,770 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:24:38,770 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:24:40,391 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:24:40,394 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.62秒
2025-05-17 00:24:40,394 - app.core.rag_engine - INFO - 查询处理完成，耗时: 1.86秒
2025-05-17 00:24:40,449 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:24:40,449 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:24:40,450 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:24:40,450 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:24:40,450 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:24:40,450 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:24:42,585 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:24:42,587 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.14秒
2025-05-17 00:24:42,587 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.14秒
2025-05-17 00:24:43,920 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:24:43,920 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:24:43,921 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:24:43,921 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:24:43,921 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:24:43,922 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:24:45,509 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:24:45,512 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.59秒
2025-05-17 00:24:45,512 - app.core.rag_engine - INFO - 查询处理完成，耗时: 1.59秒
2025-05-17 00:25:23,767 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:25:23,767 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:25:23,768 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:25:23,768 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:25:23,768 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:25:23,768 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:25:23,768 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:25:23,768 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:25:23,768 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:25:23,768 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:25:23,783 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:25:23,783 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:25:23,783 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:25:23,783 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:25:23,797 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:25:23,797 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:25:23,797 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:25:23,799 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:25:23,799 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:25:23,799 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:25:23,799 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:25:23,799 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:25:23,812 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:25:23,812 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:25:23,814 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:25:23,814 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:25:23,814 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:25:23,814 - app.api.routes.ingest - INFO - 开始处理文档: a0269efe-1280-4795-9e66-53c281681336
2025-05-17 00:25:23,815 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf
2025-05-17 00:25:23,865 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf, 提取了 1918 字符, 耗时: 0.05秒
2025-05-17 00:25:23,865 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1918, 生成块数=3
2025-05-17 00:25:23,865 - app.core.ingest.ingest_service - INFO - 文档被分成 3 个块
2025-05-17 00:25:24,161 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:25:24,289 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.42秒
2025-05-17 00:25:24,307 - app.core.retrieval.vector_store - INFO - 已添加 3 个文档到Chroma, 耗时: 0.02秒
2025-05-17 00:25:24,307 - app.core.ingest.ingest_service - INFO - 已向量化并存储 3 个文本块
2025-05-17 00:25:24,307 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf, 耗时: 0.49秒
2025-05-17 00:25:24,307 - app.api.routes.ingest - INFO - 文档处理完成: a0269efe-1280-4795-9e66-53c281681336
2025-05-17 00:25:28,290 - app.core.retrieval.vector_store - INFO - 已检索 6 个文档的元数据
2025-05-17 00:25:28,297 - app.core.retrieval.vector_store - INFO - 已检索 6 个文档的元数据
2025-05-17 00:25:28,303 - app.core.retrieval.vector_store - INFO - 已检索 6 个文档的元数据
2025-05-17 00:25:28,307 - app.core.retrieval.vector_store - INFO - 已检索 6 个文档的元数据
2025-05-17 00:25:38,108 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:25:38,108 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:25:38,109 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:25:38,110 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:25:38,110 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:25:38,110 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:25:39,989 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:25:39,991 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.88秒
2025-05-17 00:25:39,991 - app.core.rag_engine - INFO - 查询处理完成，耗时: 1.88秒
2025-05-17 00:28:18,318 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 00:28:18,319 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:28:18,319 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:28:18,319 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:28:18,319 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:28:18,335 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:28:18,335 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:28:18,335 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:28:18,335 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:28:18,350 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:28:18,350 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:28:18,350 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:28:18,350 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:28:18,352 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:28:18,352 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:28:18,352 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:28:18,352 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:28:18,352 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:28:18,367 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:28:18,367 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:28:18,367 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:28:18,367 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:28:18,382 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:28:18,382 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:28:18,382 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:28:18,383 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:28:18,383 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:28:18,383 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:28:18,383 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:28:18,384 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:28:18,398 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:28:18,398 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:28:18,405 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:28:18,405 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:28:18,405 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:28:18,405 - app.api.routes.admin - WARNING - 获取向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 00:31:26,984 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:31:26,985 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:31:26,998 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:31:27,019 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:31:27,025 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.03秒
2025-05-17 00:31:27,028 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:31:32,134 - zhipuai.core._http_client - INFO - Retrying request to /chat/completions in 0.911331 seconds
2025-05-17 00:31:34,943 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:31:34,947 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 7.92秒
2025-05-17 00:31:34,947 - app.core.rag_engine - INFO - 查询处理完成，耗时: 7.96秒
2025-05-17 00:32:05,240 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:32:06,828 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:32:06,828 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:32:06,828 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:32:06,831 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:32:06,831 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:32:06,831 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:32:06,860 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:32:06,860 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:32:06,860 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:32:06,976 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:07,016 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:32:07,016 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:32:07,016 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:32:07,017 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:07,029 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:32:07,030 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:32:07,030 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:32:07,030 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:32:07,430 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:32:07,430 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:32:07,431 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:32:15,217 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:32:15,217 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:32:15,218 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:32:15,218 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:32:15,218 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:32:15,218 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:32:15,218 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:32:15,218 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:32:15,218 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:32:15,219 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:15,246 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:32:15,246 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:32:15,246 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:32:15,246 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:15,266 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:32:15,266 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:32:15,266 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:32:15,271 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:32:15,271 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:32:15,271 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:32:15,271 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:32:15,272 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:15,287 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:32:15,287 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:32:15,289 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:32:15,289 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:32:15,289 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:32:15,290 - app.api.routes.ingest - INFO - 开始处理文档: 6c07a146-d436-4f60-bca9-2d3273857eee
2025-05-17 00:32:15,290 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/6c07a146-d436-4f60-bca9-2d3273857eee.pdf
2025-05-17 00:32:15,341 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/6c07a146-d436-4f60-bca9-2d3273857eee.pdf, 提取了 1918 字符, 耗时: 0.05秒
2025-05-17 00:32:15,341 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1918, 生成块数=3
2025-05-17 00:32:15,341 - app.core.ingest.ingest_service - INFO - 文档被分成 3 个块
2025-05-17 00:32:20,346 - zhipuai.core._http_client - INFO - Retrying request to /embeddings in 0.989400 seconds
2025-05-17 00:32:23,937 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:32:24,010 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 8.67秒
2025-05-17 00:32:24,032 - app.core.retrieval.vector_store - INFO - 已添加 3 个文档到Chroma, 耗时: 0.02秒
2025-05-17 00:32:24,032 - app.core.ingest.ingest_service - INFO - 已向量化并存储 3 个文本块
2025-05-17 00:32:24,033 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/6c07a146-d436-4f60-bca9-2d3273857eee.pdf, 耗时: 8.74秒
2025-05-17 00:32:24,033 - app.api.routes.ingest - INFO - 文档处理完成: 6c07a146-d436-4f60-bca9-2d3273857eee
2025-05-17 00:32:29,614 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:32:29,654 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:32:29,663 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:32:29,671 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:32:35,928 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:32:35,928 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:32:35,930 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:32:35,930 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:32:35,930 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:32:35,930 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:32:35,930 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:32:35,930 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:32:35,930 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:32:35,930 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:35,951 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:32:35,951 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:32:35,951 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:32:35,951 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:35,965 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:32:35,965 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:32:35,965 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:32:35,967 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:32:35,967 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:32:35,967 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:32:35,967 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:32:35,967 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:32:35,982 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:32:35,982 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:32:35,986 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:32:35,987 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:32:35,987 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:32:35,987 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 00:32:35,987 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 00:32:35,987 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:32:35,988 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:32:36,258 - jieba - DEBUG - Loading model cost 0.271 seconds.
2025-05-17 00:32:36,258 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:32:36,739 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:32:36,841 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.36秒
2025-05-17 00:32:36,841 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 00:32:36,841 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:32:36,842 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:32:36,842 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:32:38,795 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:32:38,799 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.96秒
2025-05-17 00:32:38,799 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.81秒
2025-05-17 00:32:42,751 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:32:42,751 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:32:43,018 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:32:43,129 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.38秒
2025-05-17 00:32:43,129 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:32:43,130 - app.core.storage.storage_service - ERROR - 向量搜索失败: Chroma集合未初始化
2025-05-17 00:32:43,130 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:32:43,130 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:32:45,451 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:32:45,454 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.32秒
2025-05-17 00:32:45,455 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.70秒
2025-05-17 00:34:34,210 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:34:34,589 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:34:34,589 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:34:34,589 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:34:34,593 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:34:34,593 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:34:34,593 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:34:34,620 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:34:34,620 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:34:34,620 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:34:34,727 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:34:34,766 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:34:34,766 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:34:34,766 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:34:34,766 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:34:34,780 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:34:34,780 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:34:34,780 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:34:34,780 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:34:35,146 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:34:35,146 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:34:35,146 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:35:06,103 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:35:06,456 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:06,456 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:06,456 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:35:06,459 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:06,459 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:06,459 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:35:06,486 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:35:06,486 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:35:06,486 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:35:06,578 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:06,609 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:35:06,609 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:35:06,609 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:35:06,609 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:06,623 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:35:06,623 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:35:06,623 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:35:06,623 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:35:06,930 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:35:06,930 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:35:06,930 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:35:45,837 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:35:46,273 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:46,273 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:46,273 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:35:46,277 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:46,277 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:46,277 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:35:46,305 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:35:46,305 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:35:46,305 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:35:46,414 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:46,453 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:35:46,453 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:35:46,453 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:35:46,453 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:46,467 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:35:46,467 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:35:46,467 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:35:46,467 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:35:46,835 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:35:46,835 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:35:46,835 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:35:58,675 - app.api.main - INFO - API服务正在关闭...
2025-05-17 00:35:59,115 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:59,115 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:59,115 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:35:59,118 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:35:59,118 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:35:59,119 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:35:59,145 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:35:59,145 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:35:59,145 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:35:59,222 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:59,251 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:35:59,251 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:35:59,251 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:35:59,252 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:35:59,265 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:35:59,265 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:35:59,265 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:35:59,265 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:35:59,577 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:35:59,577 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:35:59,577 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:36:07,701 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:36:07,701 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:36:07,701 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:36:07,701 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:36:07,701 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:36:07,701 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:36:07,701 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:36:07,701 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:36:07,701 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:36:07,702 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:36:07,717 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:36:07,717 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:36:07,717 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:36:07,717 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:36:07,732 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:36:07,732 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:36:07,732 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:36:07,737 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:36:07,737 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:36:07,737 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:36:07,737 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:36:07,737 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:36:07,752 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:36:07,752 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:36:07,754 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:36:07,754 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:36:07,754 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:36:07,754 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 00:36:07,754 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 00:36:07,754 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:36:07,755 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:36:08,031 - jieba - DEBUG - Loading model cost 0.276 seconds.
2025-05-17 00:36:08,031 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:36:08,562 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:36:08,666 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.41秒
2025-05-17 00:36:08,666 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 00:36:08,667 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 00:36:08,669 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:36:08,681 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 0 个文档, 耗时: 0.01秒
2025-05-17 00:36:08,681 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.01秒
2025-05-17 00:36:08,681 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:36:10,731 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:36:10,732 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.05秒
2025-05-17 00:36:10,732 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.98秒
2025-05-17 00:36:40,241 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:36:40,682 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:36:40,683 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 0.44秒
2025-05-17 00:37:38,573 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:37:38,573 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:37:38,857 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:37:38,950 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.38秒
2025-05-17 00:37:38,950 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:37:38,952 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 0 个文档, 耗时: 0.00秒
2025-05-17 00:37:38,952 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:37:38,952 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:37:41,200 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:37:41,201 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.25秒
2025-05-17 00:37:41,202 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.63秒
2025-05-17 00:37:42,843 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:37:42,843 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:37:42,843 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:37:42,848 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 0 个文档, 耗时: 0.00秒
2025-05-17 00:37:42,848 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:37:42,848 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:37:44,472 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:37:44,475 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.63秒
2025-05-17 00:37:44,475 - app.core.rag_engine - INFO - 查询处理完成，耗时: 1.63秒
2025-05-17 00:37:46,219 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:37:46,220 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:37:46,221 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:37:46,221 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:37:46,221 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:37:46,221 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma_db
2025-05-17 00:37:46,221 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:37:46,221 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:37:46,221 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:37:46,221 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:37:46,249 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:37:46,249 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:37:46,249 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:37:46,249 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:37:46,269 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:37:46,269 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:37:46,269 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:37:46,273 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:37:46,273 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:37:46,273 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:37:46,273 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:37:46,274 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:37:46,289 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:37:46,289 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:37:46,291 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:37:46,291 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:37:46,291 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:37:46,295 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:37:46,302 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:37:46,307 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:37:46,311 - app.core.retrieval.vector_store - INFO - 已检索 9 个文档的元数据
2025-05-17 00:41:37,841 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:41:37,841 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:41:37,841 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 00:41:37,844 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 00:41:37,844 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 00:41:37,844 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 00:41:37,874 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:41:37,874 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:41:37,874 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:41:38,006 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:41:38,045 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:41:38,045 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:41:38,046 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:41:38,046 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:41:38,059 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:41:38,059 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:41:38,059 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 00:41:38,059 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:41:38,521 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:41:38,521 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 00:41:38,521 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:42:02,472 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 00:42:02,472 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:42:02,473 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:42:02,473 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:42:02,473 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:42:02,473 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 00:42:02,473 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:42:02,473 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:42:02,474 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:42:02,474 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:02,501 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:42:02,501 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:42:02,501 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:42:02,501 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:02,521 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:42:02,521 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:42:02,521 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:42:02,533 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:42:02,533 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:42:02,533 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:42:02,533 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:42:02,534 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:02,549 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:42:02,549 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:42:02,551 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:42:02,551 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:42:02,551 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:42:02,553 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:42:02,553 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:42:02,553 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 00:42:02,554 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 00:42:02,855 - jieba - DEBUG - Loading model cost 0.302 seconds.
2025-05-17 00:42:02,855 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 00:42:03,351 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:42:03,447 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.34秒
2025-05-17 00:42:03,448 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:42:03,448 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 00:42:03,452 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:42:03,468 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 9, updating n_results = 9
2025-05-17 00:42:03,480 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 9 个文档, 耗时: 0.03秒
2025-05-17 00:42:03,480 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.03秒
2025-05-17 00:42:03,480 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:42:05,777 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:42:05,781 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.30秒
2025-05-17 00:42:05,781 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.23秒
2025-05-17 00:42:08,852 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 00:42:08,852 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 00:42:09,343 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:42:09,399 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.55秒
2025-05-17 00:42:09,399 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 00:42:09,401 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 9, updating n_results = 9
2025-05-17 00:42:09,402 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 9 个文档, 耗时: 0.00秒
2025-05-17 00:42:09,402 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 00:42:09,402 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:42:11,257 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:42:11,259 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.86秒
2025-05-17 00:42:11,259 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.41秒
2025-05-17 00:42:28,041 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 00:42:28,041 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 00:42:28,042 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 00:42:28,042 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 00:42:28,042 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 00:42:28,043 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 00:42:28,043 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 00:42:28,043 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 00:42:28,043 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 00:42:28,043 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:28,064 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 00:42:28,064 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 00:42:28,064 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 00:42:28,064 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:28,085 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:42:28,085 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:42:28,085 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 00:42:28,088 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:42:28,088 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 00:42:28,088 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 00:42:28,088 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 00:42:28,088 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 00:42:28,104 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 00:42:28,104 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 00:42:28,106 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 00:42:28,106 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 00:42:28,106 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 00:42:28,107 - app.api.routes.ingest - INFO - 开始处理文档: 99b8220a-3e03-43f7-a7b7-f249b9231b40
2025-05-17 00:42:28,107 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/99b8220a-3e03-43f7-a7b7-f249b9231b40.pdf
2025-05-17 00:42:28,160 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/99b8220a-3e03-43f7-a7b7-f249b9231b40.pdf, 提取了 1918 字符, 耗时: 0.05秒
2025-05-17 00:42:28,161 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1918, 生成块数=3
2025-05-17 00:42:28,161 - app.core.ingest.ingest_service - INFO - 文档被分成 3 个块
2025-05-17 00:42:28,447 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 00:42:28,552 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.39秒
2025-05-17 00:42:28,575 - app.core.retrieval.vector_store - INFO - 已添加 3 个文档到Chroma, 耗时: 0.02秒
2025-05-17 00:42:28,575 - app.core.ingest.ingest_service - INFO - 已向量化并存储 3 个文本块
2025-05-17 00:42:28,575 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/99b8220a-3e03-43f7-a7b7-f249b9231b40.pdf, 耗时: 0.47秒
2025-05-17 00:42:28,575 - app.api.routes.ingest - INFO - 文档处理完成: 99b8220a-3e03-43f7-a7b7-f249b9231b40
2025-05-17 00:42:33,452 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 00:42:33,452 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 00:42:33,453 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 00:42:33,457 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 9, updating n_results = 9
2025-05-17 00:42:33,461 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 9 个文档, 耗时: 0.01秒
2025-05-17 00:42:33,461 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.01秒
2025-05-17 00:42:33,461 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 00:42:35,732 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 00:42:35,737 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.28秒
2025-05-17 00:42:35,737 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.28秒
2025-05-17 10:22:12,009 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 10:22:12,009 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 10:22:12,011 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 10:22:12,015 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 9, updating n_results = 9
2025-05-17 10:22:12,017 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 9 个文档, 耗时: 0.01秒
2025-05-17 10:22:12,017 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.01秒
2025-05-17 10:22:12,017 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 10:22:14,261 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 10:22:14,263 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.25秒
2025-05-17 10:22:14,264 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.25秒
2025-05-17 10:22:34,841 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:22:34,841 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:22:34,841 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 10:22:34,844 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:22:34,844 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:22:34,844 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 10:22:34,873 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:22:34,873 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:22:34,873 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:22:35,002 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:22:35,048 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:22:35,048 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:22:35,049 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:22:35,049 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:22:35,061 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:22:35,061 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:22:35,061 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:22:35,061 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:22:35,509 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:22:35,509 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 10:22:35,509 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:22:42,772 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 10:22:42,773 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:22:42,775 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:22:42,775 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:22:42,775 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:22:42,775 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:22:42,775 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:22:42,775 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:22:42,775 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 10:22:42,775 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:22:42,804 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:22:42,804 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:22:42,804 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 10:22:42,804 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:22:42,823 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:22:42,823 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:22:42,823 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 10:22:42,831 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:22:42,832 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 10:22:42,832 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 10:22:42,832 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 10:22:42,832 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:22:42,847 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:22:42,847 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:22:42,848 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:22:42,849 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 10:22:42,849 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 10:22:42,850 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 10:22:42,850 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 10:22:42,850 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 10:22:42,851 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 10:22:43,113 - jieba - DEBUG - Loading model cost 0.263 seconds.
2025-05-17 10:22:43,113 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 10:22:43,642 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 10:22:43,757 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.42秒
2025-05-17 10:22:43,757 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 10:22:43,758 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 10:22:43,761 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:22:43,782 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 10:22:43,796 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.04秒
2025-05-17 10:22:43,796 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.04秒
2025-05-17 10:22:43,796 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 10:22:45,569 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 10:22:45,573 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.78秒
2025-05-17 10:22:45,573 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.72秒
2025-05-17 10:23:40,394 - app.api.main - INFO - API服务正在关闭...
2025-05-17 10:24:19,998 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:24:19,998 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:24:19,998 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 10:24:20,002 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:24:20,002 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:24:20,002 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 10:24:20,031 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:24:20,031 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:24:20,031 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:24:20,157 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:24:20,195 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:24:20,195 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:24:20,195 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:24:20,195 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:24:20,207 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:24:20,207 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:24:20,208 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:24:20,208 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:24:20,669 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:24:20,669 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 10:24:20,669 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:24:22,767 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 10:24:22,767 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:24:22,769 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:24:22,769 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:24:22,770 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:24:22,770 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:24:22,770 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:24:22,770 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:24:22,770 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 10:24:22,771 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:24:22,791 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:24:22,791 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:24:22,791 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 10:24:22,791 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:24:22,820 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:24:22,820 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:24:22,821 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 10:24:22,828 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:24:22,828 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 10:24:22,828 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 10:24:22,828 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 10:24:22,828 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:24:22,869 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:24:22,869 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:24:22,871 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:24:22,871 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 10:24:22,871 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 10:24:22,873 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 10:24:22,874 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 10:24:22,874 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 10:24:22,874 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 10:24:23,321 - jieba - DEBUG - Loading model cost 0.447 seconds.
2025-05-17 10:24:23,321 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 10:24:24,469 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 10:24:24,584 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.50秒
2025-05-17 10:24:24,584 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 10:24:24,584 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 10:24:24,586 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:24:24,612 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 10:24:24,630 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.04秒
2025-05-17 10:24:24,630 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.05秒
2025-05-17 10:24:24,630 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 10:24:27,772 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 10:24:27,774 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.14秒
2025-05-17 10:24:27,774 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.90秒
2025-05-17 10:56:15,070 - app.api.main - INFO - API服务正在关闭...
2025-05-17 10:56:15,524 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:56:15,524 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:56:15,524 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 10:56:15,527 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:56:15,527 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:56:15,527 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 10:56:15,557 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:56:15,557 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:56:15,557 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:56:15,674 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:56:15,714 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:56:15,714 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:56:15,714 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:56:15,714 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:56:15,727 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:56:15,727 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:56:15,727 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:56:15,727 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:56:16,143 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:56:16,144 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 10:56:16,144 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:56:53,899 - app.api.main - INFO - API服务正在关闭...
2025-05-17 10:56:54,291 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:56:54,291 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:56:54,291 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 10:56:54,294 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 10:56:54,294 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 10:56:54,294 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 10:56:54,322 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 10:56:54,322 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 10:56:54,322 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 10:56:54,431 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:56:54,471 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 10:56:54,471 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 10:56:54,471 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 10:56:54,472 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 10:56:54,485 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 10:56:54,485 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 10:56:54,485 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 10:56:54,485 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 10:56:54,863 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 10:56:54,863 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 10:56:54,863 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 10:59:57,237 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:00:07,342 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:00:07,342 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:00:07,342 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:00:07,345 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:00:07,345 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:00:07,345 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:00:07,374 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:00:07,374 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:00:07,374 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:00:07,490 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:00:07,529 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:00:07,529 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:00:07,529 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:00:07,529 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:00:07,542 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:00:07,542 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:00:07,542 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:00:07,542 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:00:07,942 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:00:07,942 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:00:07,942 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:00:12,552 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:00:12,552 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:00:12,553 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:00:12,553 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:00:12,553 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:00:12,553 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:00:12,553 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:00:12,553 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:00:12,553 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:00:12,553 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:00:12,575 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:00:12,575 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:00:12,575 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:00:12,575 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:00:12,592 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:00:12,593 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:00:12,593 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:00:12,596 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:00:12,596 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:00:12,596 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:00:12,596 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:00:12,596 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:00:12,611 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:00:12,611 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:00:12,613 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:00:12,613 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:00:12,613 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:00:12,613 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 11:00:12,613 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 11:00:12,614 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:00:12,615 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:00:12,883 - jieba - DEBUG - Loading model cost 0.269 seconds.
2025-05-17 11:00:12,883 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:00:13,527 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:00:13,644 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.54秒
2025-05-17 11:00:13,644 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 11:00:13,644 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:00:13,647 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:00:13,660 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:00:13,671 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:00:13,671 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.03秒
2025-05-17 11:00:13,671 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:00:15,670 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:00:15,671 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.00秒
2025-05-17 11:00:15,671 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.06秒
2025-05-17 11:00:31,242 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 11:00:31,243 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 11:00:31,719 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:00:31,891 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.65秒
2025-05-17 11:00:31,891 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 11:00:31,896 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:00:31,899 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:00:31,899 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.01秒
2025-05-17 11:00:31,899 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:00:34,469 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:00:34,473 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 2.57秒
2025-05-17 11:00:34,473 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.23秒
2025-05-17 11:00:37,878 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 11:00:37,878 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 11:00:38,593 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:00:38,689 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.81秒
2025-05-17 11:00:38,690 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 11:00:38,692 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:00:38,694 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:00:38,694 - app.core.rag_engine - INFO - 检索完成: 找到 0 个文档片段, 耗时: 0.00秒
2025-05-17 11:00:38,694 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:00:40,502 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:00:40,505 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 1.81秒
2025-05-17 11:00:40,505 - app.core.rag_engine - INFO - 查询处理完成，耗时: 2.63秒
2025-05-17 11:01:08,294 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:01:08,776 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:01:08,776 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:01:08,776 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:01:08,780 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:01:08,780 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:01:08,780 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:01:08,808 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:01:08,808 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:01:08,808 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:01:08,931 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:01:08,972 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:01:08,972 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:01:08,972 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:01:08,972 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:01:08,985 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:01:08,985 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:01:08,985 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:01:08,985 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:01:09,391 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:01:09,391 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:01:09,391 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:01:54,902 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:01:55,325 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:01:55,325 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:01:55,325 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:01:55,328 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:01:55,328 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:01:55,328 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:01:55,357 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:01:55,357 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:01:55,357 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:01:55,465 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:01:55,505 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:01:55,505 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:01:55,505 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:01:55,505 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:01:55,518 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:01:55,518 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:01:55,518 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:01:55,518 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:01:55,899 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:01:55,899 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:01:55,900 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:02:08,264 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:02:08,264 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:02:08,264 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:02:08,265 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:02:08,265 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:02:08,265 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:02:08,265 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:02:08,265 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:02:08,265 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:02:08,265 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:08,287 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:02:08,287 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:02:08,287 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:02:08,287 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:08,304 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:08,304 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:08,304 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:02:08,312 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:08,312 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:02:08,312 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:02:08,312 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:02:08,312 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:08,326 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:08,327 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:08,328 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:08,328 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:02:08,328 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:02:08,329 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 11:02:08,329 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 11:02:08,329 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:02:08,329 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:02:08,603 - jieba - DEBUG - Loading model cost 0.274 seconds.
2025-05-17 11:02:08,603 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:02:09,108 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:02:09,214 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.37秒
2025-05-17 11:02:09,214 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 11:02:09,215 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:02:09,217 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:09,228 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:02:09,240 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.35224343379104606}
2025-05-17 11:02:09,240 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:02:09,240 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.03秒
2025-05-17 11:02:09,240 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:02:25,717 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:02:26,234 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:02:26,234 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:02:26,234 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:02:26,237 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:02:26,237 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:02:26,237 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:02:26,268 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:02:26,268 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:02:26,268 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:02:26,399 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:26,441 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:26,441 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:26,441 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:02:26,441 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:26,456 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:02:26,456 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:02:26,456 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:02:26,456 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:02:26,878 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:26,878 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:02:26,878 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:02:39,667 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:02:40,207 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:02:40,207 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:02:40,207 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:02:40,211 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:02:40,211 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:02:40,211 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:02:40,238 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:02:40,239 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:02:40,239 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:02:40,348 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:40,388 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:40,389 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:40,389 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:02:40,389 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:40,403 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:02:40,403 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:02:40,403 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:02:40,403 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:02:40,924 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:40,924 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:02:40,924 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:02:49,053 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:02:49,054 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:02:49,054 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:02:49,054 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:02:49,054 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:02:49,054 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:02:49,054 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:02:49,054 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:02:49,054 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:02:49,054 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:49,073 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:02:49,074 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:02:49,074 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:02:49,074 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:49,089 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:49,089 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:49,089 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:02:49,096 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:49,096 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:02:49,096 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:02:49,096 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:02:49,096 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:02:49,111 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:02:49,111 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:02:49,113 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:49,113 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:02:49,113 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:02:49,114 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 11:02:49,114 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 11:02:49,114 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:02:49,115 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:02:49,392 - jieba - DEBUG - Loading model cost 0.278 seconds.
2025-05-17 11:02:49,392 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:02:49,915 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:02:50,012 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.38秒
2025-05-17 11:02:50,013 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 11:02:50,013 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:02:50,014 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:02:50,023 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:02:50,033 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.35224343379104606}
2025-05-17 11:02:50,033 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:02:50,033 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:02:50,033 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:03:27,154 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:03:27,566 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:03:27,566 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:03:27,566 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:03:27,569 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:03:27,569 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:03:27,569 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:03:27,598 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:03:27,599 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:03:27,599 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:03:27,720 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:27,759 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:03:27,759 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:03:27,760 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:03:27,760 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:27,773 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:03:27,773 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:03:27,773 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:03:27,773 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:03:28,177 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:03:28,177 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:03:28,177 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:03:38,690 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:03:39,098 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:03:39,098 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:03:39,098 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:03:39,101 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:03:39,102 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:03:39,102 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:03:39,134 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:03:39,134 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:03:39,134 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:03:39,244 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:39,283 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:03:39,284 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:03:39,284 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:03:39,284 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:39,297 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:03:39,297 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:03:39,298 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:03:39,298 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:03:39,691 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:03:39,691 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:03:39,691 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:03:47,973 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:03:47,973 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:03:47,974 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:03:47,974 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:03:47,974 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:03:47,974 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:03:47,974 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:03:47,974 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:03:47,974 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:03:47,974 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:47,995 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:03:47,995 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:03:47,995 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:03:47,995 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:48,011 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:03:48,011 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:03:48,011 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:03:48,016 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:03:48,017 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:03:48,017 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:03:48,017 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:03:48,017 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:03:48,031 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:03:48,031 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:03:48,032 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:03:48,033 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:03:48,033 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:03:48,033 - app.api.routes.query - INFO - 接收到查询: 什么是RAG？
2025-05-17 11:03:48,033 - app.core.rag_engine - INFO - 开始处理查询: 什么是RAG？
2025-05-17 11:03:48,033 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:03:48,034 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:03:48,312 - jieba - DEBUG - Loading model cost 0.279 seconds.
2025-05-17 11:03:48,312 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:03:49,471 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:03:49,561 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 1.02秒
2025-05-17 11:03:49,561 - app.core.rag_engine - INFO - 开始检索文档: 什么是RAG？
2025-05-17 11:03:49,562 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:03:49,564 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:03:49,575 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:03:49,586 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.35223518132261344}
2025-05-17 11:03:49,586 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:03:49,586 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:03:49,586 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:04:00,237 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 11:04:00,238 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 11:04:01,077 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:04:01,160 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.92秒
2025-05-17 11:04:01,160 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 11:04:01,168 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:04:01,173 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.65380077692121}
2025-05-17 11:04:01,173 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:04:01,174 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:04:01,174 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:04:02,553 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 11:04:02,553 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 11:04:02,554 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 11:04:02,557 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:04:02,561 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.65380077692121}
2025-05-17 11:04:02,561 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:04:02,562 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:04:02,562 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:05:17,164 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:05:17,632 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:05:17,632 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:05:17,632 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:05:17,635 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:05:17,635 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:05:17,636 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:05:17,664 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:05:17,664 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:05:17,664 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:05:17,786 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:05:17,826 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:05:17,827 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:05:17,827 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:05:17,827 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:05:17,840 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:05:17,840 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:05:17,840 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:05:17,840 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:05:18,248 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:05:18,248 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:05:18,248 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:05:55,512 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:05:56,149 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:05:56,149 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:05:56,149 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:05:56,153 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:05:56,153 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:05:56,153 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:05:56,180 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:05:56,180 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:05:56,181 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:05:56,290 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:05:56,328 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:05:56,329 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:05:56,329 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:05:56,329 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:05:56,342 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:05:56,342 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:05:56,342 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:05:56,342 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:05:56,708 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:05:56,708 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:05:56,708 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:06:05,292 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:06:05,292 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:06:05,293 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:06:05,293 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:06:05,293 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:06:05,293 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:06:05,293 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:06:05,293 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:06:05,293 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:06:05,293 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:06:05,315 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:06:05,315 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:06:05,315 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:06:05,315 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:06:05,331 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:06:05,331 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:06:05,331 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:06:05,335 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:06:05,335 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:06:05,336 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:06:05,336 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:06:05,336 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:06:05,350 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:06:05,350 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:06:05,352 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:06:05,352 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:06:05,352 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:06:05,353 - app.api.routes.query - INFO - 接收到查询: 什么是energy delegation？
2025-05-17 11:06:05,353 - app.core.rag_engine - INFO - 开始处理查询: 什么是energy delegation？
2025-05-17 11:06:05,353 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:06:05,353 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:06:05,631 - jieba - DEBUG - Loading model cost 0.279 seconds.
2025-05-17 11:06:05,632 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:06:06,170 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:06:06,283 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.43秒
2025-05-17 11:06:06,283 - app.core.rag_engine - INFO - 开始检索文档: 什么是energy delegation？
2025-05-17 11:06:06,284 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:06:06,285 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:06:06,294 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:06:06,304 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412724_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'a7c5a03d-5136-4c0f-b65a-36a8029fc56b', 'extract_images': False, 'extract_metadata': True, 'file_name': 'a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_path': 'data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:25:23'}, 'similarity': 0.599206861335717}
2025-05-17 11:06:06,304 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:06:06,308 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:06:06,308 - app.core.rag_engine - ERROR - 处理查询时出错: 'DocumentChunk' object has no attribute 'get'
2025-05-17 11:06:29,610 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:08:38,874 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:08:38,875 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:08:38,875 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:08:38,878 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:08:38,878 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:08:38,878 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:08:38,909 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:08:38,909 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:08:38,909 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:08:39,043 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:08:39,088 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:08:39,088 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:08:39,088 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:08:39,088 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:08:39,101 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:08:39,101 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:08:39,102 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:08:39,102 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:08:39,608 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:08:39,608 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:08:39,608 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:08:47,983 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:08:47,983 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:08:47,984 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:08:47,984 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:08:47,984 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:08:47,984 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:08:47,984 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:08:47,984 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:08:47,984 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:08:47,984 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:08:48,004 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:08:48,004 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:08:48,004 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:08:48,004 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:08:48,020 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:08:48,020 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:08:48,020 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:08:48,027 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:08:48,027 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:08:48,027 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:08:48,027 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:08:48,027 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:08:48,041 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:08:48,042 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:08:48,043 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:08:48,043 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:08:48,043 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:08:48,044 - app.api.routes.query - INFO - 接收到查询: 我应该如何使用RAG系统？
2025-05-17 11:08:48,044 - app.core.rag_engine - INFO - 开始处理查询: 我应该如何使用RAG系统？
2025-05-17 11:08:48,045 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:08:48,046 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:08:48,336 - jieba - DEBUG - Loading model cost 0.290 seconds.
2025-05-17 11:08:48,336 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:08:49,045 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:08:49,111 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.53秒
2025-05-17 11:08:49,111 - app.core.rag_engine - INFO - 开始检索文档: 我应该如何使用RAG系统？
2025-05-17 11:08:49,111 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:08:49,113 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:08:49,124 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:08:49,132 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747413144_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': '66eeba50-ad40-43f8-9c8b-72a8a8b2e659', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c07a146-d436-4f60-bca9-2d3273857eee.pdf', 'file_path': 'data/raw/6c07a146-d436-4f60-bca9-2d3273857eee.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:32:15'}, 'similarity': 0.41829163612949216}
2025-05-17 11:08:49,133 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:08:49,136 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.03秒
2025-05-17 11:08:49,136 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:08:53,291 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:08:53,293 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.16秒
2025-05-17 11:08:53,293 - app.core.rag_engine - INFO - 查询处理完成，耗时: 5.25秒
2025-05-17 11:09:02,469 - app.api.routes.query - INFO - 接收到查询: Energy Delegation是什么服务？
2025-05-17 11:09:02,469 - app.core.rag_engine - INFO - 开始处理查询: Energy Delegation是什么服务？
2025-05-17 11:09:02,923 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:09:02,986 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.52秒
2025-05-17 11:09:02,986 - app.core.rag_engine - INFO - 开始检索文档: Energy Delegation是什么服务？
2025-05-17 11:09:02,987 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:09:02,989 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412724_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'a7c5a03d-5136-4c0f-b65a-36a8029fc56b', 'extract_images': False, 'extract_metadata': True, 'file_name': 'a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_path': 'data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:25:23'}, 'similarity': 0.5961384608047512}
2025-05-17 11:09:02,989 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:09:02,992 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:09:02,992 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:09:08,296 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:09:08,299 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 5.31秒
2025-05-17 11:09:08,299 - app.core.rag_engine - INFO - 查询处理完成，耗时: 5.83秒
2025-05-17 11:10:23,341 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:10:23,341 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:10:23,341 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:10:23,342 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:10:23,342 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:10:23,358 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:10:23,358 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:10:23,358 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:10:23,358 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:10:23,372 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:10:23,373 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:10:23,373 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:10:23,373 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:10:23,377 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:10:23,377 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:10:23,377 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:10:23,377 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:10:23,377 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:10:23,391 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:10:23,391 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:10:23,391 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:10:23,391 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:10:23,406 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:10:23,406 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:10:23,406 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:10:23,408 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:10:23,408 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:10:23,408 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:10:23,408 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:10:23,408 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:10:23,426 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:10:23,426 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:10:23,428 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:10:23,428 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:10:23,428 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:10:38,721 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:10:39,324 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:10:39,326 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 0.60秒
2025-05-17 11:10:57,729 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 11:10:57,729 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 11:10:58,762 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:10:58,878 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 1.15秒
2025-05-17 11:10:58,878 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 11:10:58,879 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:10:58,882 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.65380077692121}
2025-05-17 11:10:58,882 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:10:58,885 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:10:58,885 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:11:02,015 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:11:02,019 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.13秒
2025-05-17 11:11:02,019 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.29秒
2025-05-17 11:11:11,906 - app.api.routes.query - INFO - 接收到查询: 教我energy delegation
2025-05-17 11:11:11,906 - app.core.rag_engine - INFO - 开始处理查询: 教我energy delegation
2025-05-17 11:11:11,907 - app.core.rag_engine - INFO - 开始检索文档: 教我energy delegation
2025-05-17 11:11:11,910 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:11:11,913 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.65380077692121}
2025-05-17 11:11:11,913 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:11:11,920 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:11:11,921 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:11:15,478 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:11:15,481 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.56秒
2025-05-17 11:11:15,481 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.57秒
2025-05-17 11:11:17,557 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 11:11:17,557 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 11:11:17,820 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:11:17,928 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.37秒
2025-05-17 11:11:17,928 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 11:11:17,930 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:11:17,931 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6320769255061893}
2025-05-17 11:11:17,931 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:11:17,936 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:11:17,936 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:11:22,528 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:11:22,531 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.60秒
2025-05-17 11:11:22,532 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.97秒
2025-05-17 11:11:29,121 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 11:11:29,121 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 11:11:29,122 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 11:11:29,125 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:11:29,129 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6320769255061893}
2025-05-17 11:11:29,130 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:11:29,137 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:11:29,137 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:11:33,117 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:11:33,120 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.98秒
2025-05-17 11:11:33,120 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.00秒
2025-05-17 11:11:55,644 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:11:56,135 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:11:56,135 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:11:56,135 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:11:56,138 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:11:56,138 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:11:56,138 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:11:56,166 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:11:56,166 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:11:56,166 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:11:56,278 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:11:56,318 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:11:56,318 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:11:56,318 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:11:56,318 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:11:56,331 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:11:56,331 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:11:56,331 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:11:56,331 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:11:56,733 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:11:56,733 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:11:56,733 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:15:34,944 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:15:34,945 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:15:34,945 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:15:34,945 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:15:34,945 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:15:34,946 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:15:34,946 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:15:34,946 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:15:34,946 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:15:34,946 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:15:34,976 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:15:34,976 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:15:34,976 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:15:34,976 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:15:34,993 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:15:34,993 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:15:34,993 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:15:35,016 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:15:35,016 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:15:35,016 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:15:35,016 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:15:35,017 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:15:35,033 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:15:35,033 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:15:35,035 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:15:35,035 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:15:35,035 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:15:35,037 - app.api.routes.query - INFO - 接收到查询: 如何delegate energy？
2025-05-17 11:15:35,037 - app.core.rag_engine - INFO - 开始处理查询: 如何delegate energy？
2025-05-17 11:15:35,037 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:15:35,038 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:15:35,352 - jieba - DEBUG - Loading model cost 0.315 seconds.
2025-05-17 11:15:35,353 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:15:35,880 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:15:35,986 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.39秒
2025-05-17 11:15:35,986 - app.core.rag_engine - INFO - 开始检索文档: 如何delegate energy？
2025-05-17 11:15:35,986 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:15:35,988 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:15:35,998 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:15:36,010 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6021337058320324}
2025-05-17 11:15:36,010 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.02秒
2025-05-17 11:15:36,013 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.03秒
2025-05-17 11:15:36,013 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:15:40,742 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:15:40,744 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.73秒
2025-05-17 11:15:40,744 - app.core.rag_engine - INFO - 查询处理完成，耗时: 5.71秒
2025-05-17 11:16:46,834 - app.api.routes.query - INFO - 接收到查询: 教我怎么用transfer api
2025-05-17 11:16:46,835 - app.core.rag_engine - INFO - 开始处理查询: 教我怎么用transfer api
2025-05-17 11:16:47,296 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:16:47,409 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.56秒
2025-05-17 11:16:47,409 - app.core.rag_engine - INFO - 开始检索文档: 教我怎么用transfer api
2025-05-17 11:16:47,411 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:16:47,413 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6912084933218965}
2025-05-17 11:16:47,413 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:16:47,416 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:16:47,416 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:16:56,017 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:16:56,018 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 8.60秒
2025-05-17 11:16:56,018 - app.core.rag_engine - INFO - 查询处理完成，耗时: 9.18秒
2025-05-17 11:17:04,681 - app.api.routes.query - INFO - 接收到查询: 教我怎么做energy delegation
2025-05-17 11:17:04,682 - app.core.rag_engine - INFO - 开始处理查询: 教我怎么做energy delegation
2025-05-17 11:17:04,999 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:17:05,087 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.40秒
2025-05-17 11:17:05,087 - app.core.rag_engine - INFO - 开始检索文档: 教我怎么做energy delegation
2025-05-17 11:17:05,091 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:17:05,094 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6366029976527507}
2025-05-17 11:17:05,095 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:17:05,101 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:17:05,101 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:17:09,228 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:17:09,231 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.13秒
2025-05-17 11:17:09,231 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.55秒
2025-05-17 11:17:16,321 - app.api.routes.query - INFO - 接收到查询: 介绍一下https://gastation.cregis.io/api/tron/transfer 这个api
2025-05-17 11:17:16,321 - app.core.rag_engine - INFO - 开始处理查询: 介绍一下https://gastation.cregis.io/api/tron/transfer 这个api
2025-05-17 11:17:16,602 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:17:16,719 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.40秒
2025-05-17 11:17:16,719 - app.core.rag_engine - INFO - 开始检索文档: 介绍一下https://gastation.cregis.io/api/tron/transfer 这个api
2025-05-17 11:17:16,721 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:17:16,723 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.7044924952535212}
2025-05-17 11:17:16,723 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.00秒
2025-05-17 11:17:16,730 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:17:16,730 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:17:27,560 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:17:27,564 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 10.83秒
2025-05-17 11:17:27,564 - app.core.rag_engine - INFO - 查询处理完成，耗时: 11.24秒
2025-05-17 11:17:42,496 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 11:17:42,496 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:17:42,498 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:17:42,500 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:17:42,500 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:17:42,500 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:17:42,500 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:17:42,500 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:17:42,500 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:17:42,500 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:17:42,526 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:17:42,526 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:17:42,526 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:17:42,526 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:17:42,545 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:17:42,545 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:17:42,545 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:17:42,550 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:17:42,550 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:17:42,550 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:17:42,550 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:17:42,551 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:17:42,566 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:17:42,566 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:17:42,568 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:17:42,568 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:17:42,568 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:17:42,572 - app.core.retrieval.vector_store - INFO - 已检索 12 个文档的元数据
2025-05-17 11:17:42,578 - app.core.retrieval.vector_store - INFO - 已检索 12 个文档的元数据
2025-05-17 11:17:42,584 - app.core.retrieval.vector_store - INFO - 已检索 12 个文档的元数据
2025-05-17 11:17:42,588 - app.core.retrieval.vector_store - INFO - 已检索 12 个文档的元数据
2025-05-17 11:17:58,543 - app.api.routes.ingest - INFO - 开始处理文档: 6c4b5c20-1b17-43ad-b693-35cbb2fc85e0
2025-05-17 11:17:58,543 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf
2025-05-17 11:17:58,620 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf, 提取了 1135 字符, 耗时: 0.08秒
2025-05-17 11:17:58,620 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1135, 生成块数=2
2025-05-17 11:17:58,620 - app.core.ingest.ingest_service - INFO - 文档被分成 2 个块
2025-05-17 11:17:59,204 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:17:59,325 - app.core.embedding.embedding_service - INFO - 嵌入完成: 2 个文本, 耗时: 0.70秒
2025-05-17 11:17:59,348 - app.core.retrieval.vector_store - INFO - 已添加 2 个文档到Chroma, 耗时: 0.02秒
2025-05-17 11:17:59,348 - app.core.ingest.ingest_service - INFO - 已向量化并存储 2 个文本块
2025-05-17 11:17:59,349 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf, 耗时: 0.81秒
2025-05-17 11:17:59,350 - app.api.routes.ingest - INFO - 文档处理完成: 6c4b5c20-1b17-43ad-b693-35cbb2fc85e0
2025-05-17 11:18:02,696 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:02,705 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:02,713 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:02,719 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:06,801 - app.core.ingest.ingest_service - INFO - 开始删除文档: 1747451879
2025-05-17 11:18:06,801 - app.core.retrieval.vector_store - ERROR - Chroma相似度搜索失败: 'list' object has no attribute 'tolist'
2025-05-17 11:18:06,802 - app.core.ingest.ingest_service - WARNING - 未找到属于文档 1747451879 的块
2025-05-17 11:18:06,811 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:09,994 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:10,679 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:11,155 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:14,239 - app.core.ingest.ingest_service - INFO - 开始删除文档: 1747451879
2025-05-17 11:18:14,239 - app.core.retrieval.vector_store - ERROR - Chroma相似度搜索失败: 'list' object has no attribute 'tolist'
2025-05-17 11:18:14,239 - app.core.ingest.ingest_service - WARNING - 未找到属于文档 1747451879 的块
2025-05-17 11:18:14,250 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:16,229 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:16,763 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:22,870 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:22,871 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:23,165 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:18:23,287 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.41秒
2025-05-17 11:18:23,287 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:23,292 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:18:23,296 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.4838824141132356}
2025-05-17 11:18:23,296 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:18:23,302 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:18:23,302 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:18:28,291 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:18:28,293 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.99秒
2025-05-17 11:18:28,293 - app.core.rag_engine - INFO - 查询处理完成，耗时: 5.42秒
2025-05-17 11:18:34,320 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:34,333 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:34,341 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:34,346 - app.core.retrieval.vector_store - INFO - 已检索 14 个文档的元数据
2025-05-17 11:18:41,493 - app.api.routes.ingest - INFO - 开始处理文档: 59fb1f2a-d531-47d6-990f-e545db015892
2025-05-17 11:18:41,494 - app.core.ingest.ingest_service - INFO - 开始摄入文件: data/raw/59fb1f2a-d531-47d6-990f-e545db015892.pdf
2025-05-17 11:18:41,529 - app.core.ingest.document_processor - INFO - 文档处理完成: data/raw/59fb1f2a-d531-47d6-990f-e545db015892.pdf, 提取了 1135 字符, 耗时: 0.03秒
2025-05-17 11:18:41,529 - app.core.ingest.chunker - INFO - 文本分块完成: 输入长度=1135, 生成块数=2
2025-05-17 11:18:41,529 - app.core.ingest.ingest_service - INFO - 文档被分成 2 个块
2025-05-17 11:18:41,542 - app.core.retrieval.vector_store - INFO - 已添加 2 个文档到Chroma, 耗时: 0.01秒
2025-05-17 11:18:41,542 - app.core.ingest.ingest_service - INFO - 已向量化并存储 2 个文本块
2025-05-17 11:18:41,543 - app.core.ingest.ingest_service - INFO - 文件摄入完成: data/raw/59fb1f2a-d531-47d6-990f-e545db015892.pdf, 耗时: 0.05秒
2025-05-17 11:18:41,543 - app.api.routes.ingest - INFO - 文档处理完成: 59fb1f2a-d531-47d6-990f-e545db015892
2025-05-17 11:18:49,769 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:49,770 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:49,771 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 11:18:49,775 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:18:49,782 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.4838824141132356}
2025-05-17 11:18:49,785 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:18:49,793 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:18:49,793 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:18:53,463 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:18:53,468 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.67秒
2025-05-17 11:18:53,468 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.70秒
2025-05-17 11:18:55,580 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:18:55,604 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:18:55,613 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:18:55,618 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:18:57,112 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:19:03,091 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:19:03,093 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:19:03,093 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 11:19:03,097 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 12, updating n_results = 12
2025-05-17 11:19:03,100 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_2', 'text': 'QueryBillingRecords\nAPIDescription\nAPIURL:https://gastation.cregis.io/api/tron/credit\nRequestMethod:GET\nRequestParameters:\n\uf06c key:TheAPIvalidationkey,providedbytheprovider.Pleasekeepthiskeysafeand\ndonotdiscloseit.\n\uf06c pageNum:Thepagenumber,defaultis1.\n\uf06c pageSize:Thenumberofrecordsperpage,defaultis10.\n\uf06c createdTimestampStart:Thestarttimeofthequery(13-digittimestamp),optional.\n\uf06c createdTimestampEnd:Theendtimeofthequery(13-digittimestamp),optional.\nRequestExample:', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 2, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.4838824141132356}
2025-05-17 11:19:03,100 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 12 个文档, 耗时: 0.01秒
2025-05-17 11:19:03,121 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.03秒
2025-05-17 11:19:03,122 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:19:07,651 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:19:07,654 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.53秒
2025-05-17 11:19:07,654 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.56秒
2025-05-17 11:19:10,661 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:19:10,662 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:19:10,662 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:19:10,662 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:19:10,662 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:19:10,686 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:19:10,686 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:19:10,686 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:19:10,686 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:19:10,705 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:19:10,705 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:19:10,705 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:19:10,705 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:19:10,710 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:19:10,710 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:19:10,710 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:19:10,710 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:19:10,710 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:19:10,727 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:19:10,727 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:19:10,727 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:19:10,727 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:19:10,742 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:19:10,742 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:19:10,742 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:19:10,743 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:19:10,744 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:19:10,744 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:19:10,744 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:19:10,744 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:19:10,758 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:19:10,758 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:19:10,760 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:19:10,760 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:19:10,760 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:19:10,760 - app.api.routes.admin - WARNING - 获取向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 11:19:10,763 - app.api.routes.admin - WARNING - 获取向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 11:19:29,004 - app.api.routes.admin - WARNING - 获取向量存储状态时出错: 'ChromaVectorStore' object has no attribute 'get_document_count'
2025-05-17 11:20:15,192 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:20:15,693 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:20:15,693 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:20:15,693 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:20:15,696 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:20:15,696 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:20:15,696 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:20:15,728 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:20:15,728 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:20:15,728 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:20:15,861 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:20:15,907 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:20:15,907 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:20:15,907 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:20:15,907 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:20:15,922 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:20:15,923 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:20:15,923 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:20:15,923 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:20:16,418 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:20:16,418 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:20:16,418 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:24:36,044 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:24:36,574 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:24:36,574 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:24:36,574 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:24:36,577 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:24:36,578 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:24:36,578 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:24:36,609 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:24:36,609 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:24:36,609 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:24:36,732 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:24:36,772 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:24:36,772 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:24:36,772 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:24:36,772 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:24:36,785 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:24:36,785 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:24:36,785 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:24:36,786 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:24:37,192 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:24:37,192 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:24:37,192 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:24:59,729 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:25:00,150 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:25:00,150 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:25:00,150 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:25:00,154 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:25:00,154 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:25:00,154 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:25:00,181 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:25:00,181 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:25:00,181 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:25:00,292 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:25:00,333 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:25:00,333 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:25:00,333 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:25:00,333 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:25:00,346 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:25:00,346 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:25:00,346 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:25:00,346 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:25:00,718 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:25:00,718 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:25:00,718 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:25:46,464 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:26:15,221 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:26:15,221 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:26:15,222 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:26:15,225 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:26:15,225 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:26:15,225 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:26:15,254 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:26:15,254 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:26:15,254 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:26:15,378 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:15,419 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:15,420 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:15,420 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:26:15,420 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:15,432 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:26:15,432 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:26:15,433 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:26:15,433 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:26:15,844 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:15,845 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:26:15,845 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:26:26,346 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:26:26,347 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:26:26,347 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:26:26,347 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:26:26,347 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:26,365 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:26,365 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:26,365 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:26:26,366 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:26,380 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:26:26,380 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:26:26,380 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:26:26,380 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:26:26,387 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:26,387 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:26:26,387 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:26:26,387 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:26:26,388 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:26,402 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:26:26,402 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:26:26,402 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:26:26,402 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:26,415 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:26,416 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:26,416 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:26:26,423 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:26,423 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:26:26,423 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:26:26,423 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:26:26,423 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:26,436 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:26,436 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:26,438 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:26,438 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:26:26,439 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:26:35,455 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 11:26:35,455 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:26:35,456 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:26:35,456 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:26:35,456 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:26:35,456 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:26:35,456 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:26:35,456 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:26:35,456 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:26:35,456 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:35,471 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:26:35,471 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:26:35,471 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:26:35,471 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:35,486 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:35,486 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:35,486 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:26:35,488 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:35,488 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:26:35,488 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:26:35,488 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:26:35,488 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:26:35,501 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:26:35,501 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:26:35,503 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:26:35,503 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:26:35,503 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:26:35,505 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:29:02,705 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:29:03,202 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:29:03,202 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:29:03,202 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:29:03,206 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:29:03,206 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:29:03,206 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:29:03,235 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:29:03,235 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:29:03,235 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:29:03,362 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:03,407 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:03,407 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:03,407 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:29:03,407 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:03,421 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:03,421 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:03,421 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:29:03,421 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:29:03,869 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:03,869 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:29:03,869 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:29:06,700 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:29:06,999 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:29:06,999 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:29:07,000 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:29:07,003 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:29:07,003 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:29:07,003 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:29:07,029 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:29:07,029 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:29:07,029 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:29:07,104 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:07,134 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:07,134 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:07,134 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:29:07,134 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:07,147 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:07,147 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:07,147 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:29:07,147 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:29:07,452 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:07,452 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:29:07,452 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:29:18,873 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:29:18,873 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:29:18,873 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:29:18,873 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:29:18,873 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:29:18,873 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:29:18,873 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:29:18,874 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:29:18,874 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:29:18,874 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:18,892 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:18,892 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:18,892 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:29:18,892 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:18,908 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:18,908 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:18,908 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:29:18,912 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:18,912 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:29:18,912 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:29:18,912 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:29:18,913 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:18,936 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:18,937 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:18,938 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:18,938 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:29:18,938 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:29:18,939 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:18,939 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:18,939 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:29:18,939 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:29:19,277 - jieba - DEBUG - Loading model cost 0.338 seconds.
2025-05-17 11:29:19,277 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:29:19,874 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:29:19,988 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.45秒
2025-05-17 11:29:19,988 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:19,988 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:29:19,990 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:19,998 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:29:20,007 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.7081988420605843}
2025-05-17 11:29:20,007 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.02秒
2025-05-17 11:29:20,010 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:29:20,011 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:29:25,292 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 11:29:25,292 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:29:25,292 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:29:25,293 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:29:25,293 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:29:25,293 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:29:25,293 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:29:25,293 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:29:25,293 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:29:25,293 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:25,310 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:25,311 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:25,311 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:29:25,311 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:25,328 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:25,329 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:25,329 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:29:25,330 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:25,330 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:29:25,330 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:29:25,330 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:29:25,330 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:25,350 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:25,350 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:25,352 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:25,352 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:29:25,352 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:29:25,354 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:29:25,363 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:29:25,369 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:29:25,378 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:29:30,544 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:29:30,545 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:29:30,545 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:29:30,545 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:29:30,545 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:30,561 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:30,561 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:30,561 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:29:30,561 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:30,576 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:30,577 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:30,577 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:29:30,577 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:29:30,578 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:30,578 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:29:30,578 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:29:30,578 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:29:30,578 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:30,592 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:29:30,592 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:29:30,592 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:29:30,592 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:30,606 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:30,606 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:30,606 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:29:30,608 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:30,608 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:29:30,608 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:29:30,608 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:29:30,608 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:29:30,622 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:29:30,622 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:29:30,623 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:29:30,624 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:29:30,624 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:29:31,182 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:29:31,183 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 11.17秒
2025-05-17 11:29:31,183 - app.core.rag_engine - INFO - 查询处理完成，耗时: 12.24秒
2025-05-17 11:29:39,926 - app.api.routes.query - INFO - 接收到查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:39,928 - app.core.rag_engine - INFO - 开始处理查询: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:39,929 - app.core.rag_engine - INFO - 开始检索文档: 用英文跟我介绍一下cregis的价格
2025-05-17 11:29:39,932 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:29:39,936 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.7081988420605843}
2025-05-17 11:29:39,936 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.01秒
2025-05-17 11:29:39,944 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:29:39,944 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:29:53,168 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:29:53,169 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 13.22秒
2025-05-17 11:29:53,169 - app.core.rag_engine - INFO - 查询处理完成，耗时: 13.24秒
2025-05-17 11:30:10,628 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:30:11,047 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:30:11,047 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:30:11,047 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:30:11,050 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:30:11,050 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:30:11,050 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:30:11,070 - app.utils.log_handler - INFO - 日志处理器初始化: 查询日志目录=./data/logs/queries, 错误日志目录=./data/logs/errors
2025-05-17 11:30:11,081 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:30:11,081 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:30:11,081 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:30:11,183 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:11,221 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:30:11,221 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:30:11,221 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:30:11,221 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:11,233 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:30:11,234 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:30:11,234 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:30:11,234 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:30:11,589 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:30:11,589 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:30:11,589 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:30:22,007 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:30:22,007 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:30:22,008 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:30:22,008 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:30:22,008 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:30:22,008 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:30:22,008 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:30:22,008 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:30:22,008 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:30:22,008 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:22,028 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:30:22,028 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:30:22,029 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:30:22,029 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:22,044 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:30:22,044 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:30:22,044 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:30:22,052 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:30:22,053 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:30:22,053 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:30:22,053 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:30:22,053 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:22,071 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:30:22,071 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:30:22,073 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:30:22,073 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:30:22,073 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:30:22,074 - app.api.routes.query - INFO - 接收到查询: 跟我介绍一下cregis的价格
2025-05-17 11:30:22,074 - app.core.rag_engine - INFO - 开始处理查询: 跟我介绍一下cregis的价格
2025-05-17 11:30:22,074 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:30:22,074 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:30:22,419 - jieba - DEBUG - Loading model cost 0.345 seconds.
2025-05-17 11:30:22,419 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:30:24,988 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:30:25,266 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 2.58秒
2025-05-17 11:30:25,266 - app.core.rag_engine - INFO - 开始检索文档: 跟我介绍一下cregis的价格
2025-05-17 11:30:25,266 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:30:25,268 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:30:25,276 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:30:25,285 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.7144263946705987}
2025-05-17 11:30:25,285 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.02秒
2025-05-17 11:30:25,288 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:30:25,288 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:30:41,748 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:30:41,752 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 16.46秒
2025-05-17 11:30:41,753 - app.core.rag_engine - INFO - 查询处理完成，耗时: 19.68秒
2025-05-17 11:30:41,811 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:30:42,183 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:30:42,183 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:30:42,183 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:30:42,186 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:30:42,186 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:30:42,186 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:30:42,188 - app.utils.log_handler - INFO - 日志处理器初始化: 查询日志目录=./data/logs/queries, 错误日志目录=./data/logs/errors
2025-05-17 11:30:42,213 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:30:42,213 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:30:42,213 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:30:42,314 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:42,352 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:30:42,352 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:30:42,352 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:30:42,352 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:30:42,365 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:30:42,365 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:30:42,365 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:30:42,365 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:30:42,697 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:30:42,697 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:30:42,697 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:31:01,589 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:31:01,860 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:31:01,860 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:31:01,860 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:31:01,863 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:31:01,863 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:31:01,863 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:31:01,888 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:31:01,889 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:31:01,889 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:31:01,960 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:31:01,988 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:31:01,989 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:31:01,989 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:31:01,989 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:31:02,002 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:31:02,002 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:31:02,002 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:31:02,002 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:31:02,321 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:31:02,321 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:31:02,321 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:31:58,419 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:31:58,802 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:31:58,803 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:31:58,803 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:31:58,806 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:31:58,806 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:31:58,806 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:31:58,835 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:31:58,835 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:31:58,835 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:31:58,948 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:31:58,988 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:31:58,988 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:31:58,988 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:31:58,988 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:31:59,001 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:31:59,001 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:31:59,001 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:31:59,001 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:31:59,370 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:31:59,370 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:31:59,370 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:32:19,491 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:32:19,491 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:32:19,492 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:32:19,492 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:32:19,492 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:32:19,492 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:32:19,492 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:32:19,492 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:32:19,492 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:32:19,492 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:32:19,513 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:32:19,513 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:32:19,513 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:32:19,513 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:32:19,528 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:32:19,528 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:32:19,528 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:32:19,535 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:32:19,536 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:32:19,536 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:32:19,536 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:32:19,536 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:32:19,554 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:32:19,554 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:32:19,556 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:32:19,556 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:32:19,556 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:32:19,557 - app.api.routes.query - INFO - 接收到查询: transfer api介绍一下
2025-05-17 11:32:19,557 - app.core.rag_engine - INFO - 开始处理查询: transfer api介绍一下
2025-05-17 11:32:19,557 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:32:19,557 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:32:19,901 - jieba - DEBUG - Loading model cost 0.344 seconds.
2025-05-17 11:32:19,901 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:32:20,855 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:32:20,907 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.73秒
2025-05-17 11:32:20,907 - app.core.rag_engine - INFO - 开始检索文档: transfer api介绍一下
2025-05-17 11:32:20,908 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:32:20,909 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:32:20,918 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:32:20,926 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.7262863416339546}
2025-05-17 11:32:20,926 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.02秒
2025-05-17 11:32:20,929 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.02秒
2025-05-17 11:32:20,929 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:32:27,997 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:32:27,998 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 7.07秒
2025-05-17 11:32:27,998 - app.core.rag_engine - INFO - 查询处理完成，耗时: 8.44秒
2025-05-17 11:32:36,699 - app.api.routes.query - INFO - 接收到查询: 教我怎么做energy delegation
2025-05-17 11:32:36,699 - app.core.rag_engine - INFO - 开始处理查询: 教我怎么做energy delegation
2025-05-17 11:32:36,979 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:32:37,050 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.35秒
2025-05-17 11:32:37,050 - app.core.rag_engine - INFO - 开始检索文档: 教我怎么做energy delegation
2025-05-17 11:32:37,052 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:32:37,053 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6365918572624938}
2025-05-17 11:32:37,053 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 11:32:37,056 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:32:37,056 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:32:53,449 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:32:53,450 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 16.39秒
2025-05-17 11:32:53,450 - app.core.rag_engine - INFO - 查询处理完成，耗时: 16.75秒
2025-05-17 11:33:28,549 - app.api.routes.query - INFO - 接收到查询: 教我delegate energy
2025-05-17 11:33:28,550 - app.core.rag_engine - INFO - 开始处理查询: 教我delegate energy
2025-05-17 11:33:28,849 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:33:28,952 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.40秒
2025-05-17 11:33:28,953 - app.core.rag_engine - INFO - 开始检索文档: 教我delegate energy
2025-05-17 11:33:28,954 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:33:28,955 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412132_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'aa9a5af9-3b9a-46fb-ba2a-a770602a19e4', 'extract_images': False, 'extract_metadata': True, 'file_name': '2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_path': 'data/raw/2ddc52fb-4e59-493a-a373-67df2b235774.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:15:31'}, 'similarity': 0.6320769255061893}
2025-05-17 11:33:28,955 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 11:33:28,958 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:33:28,958 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:33:32,797 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:33:32,798 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.84秒
2025-05-17 11:33:32,798 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.25秒
2025-05-17 11:33:56,181 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:33:56,714 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:33:56,714 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:33:56,714 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:33:56,718 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:33:56,718 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:33:56,718 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:33:56,747 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:33:56,747 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:33:56,747 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:33:56,871 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:33:56,911 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:33:56,911 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:33:56,911 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:33:56,911 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:33:56,924 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:33:56,924 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:33:56,924 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:33:56,924 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:33:57,333 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:33:57,333 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:33:57,333 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:33:57,342 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:33:57,342 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:33:57,343 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:33:57,343 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:33:57,343 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:33:57,343 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:33:57,343 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:33:57,343 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:33:57,343 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:33:57,343 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:33:57,356 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:33:57,356 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:33:57,356 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:33:57,356 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:33:57,370 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:33:57,370 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:33:57,370 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:33:57,373 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:33:57,373 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:33:57,373 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:33:57,373 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:33:57,373 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:33:57,386 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:33:57,386 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:33:57,387 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:33:57,387 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:33:57,387 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:34:02,082 - app.api.routes.query - INFO - 接收到查询: 企业版一个月多少钱
2025-05-17 11:34:02,082 - app.core.rag_engine - INFO - 开始处理查询: 企业版一个月多少钱
2025-05-17 11:34:02,082 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 11:34:02,083 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 11:34:02,384 - jieba - DEBUG - Loading model cost 0.302 seconds.
2025-05-17 11:34:02,384 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 11:34:02,918 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:34:03,041 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.44秒
2025-05-17 11:34:03,041 - app.core.rag_engine - INFO - 开始检索文档: 企业版一个月多少钱
2025-05-17 11:34:03,042 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 11:34:03,045 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:34:03,058 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:34:03,070 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5550120038036157}
2025-05-17 11:34:03,070 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.02秒
2025-05-17 11:34:03,074 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.03秒
2025-05-17 11:34:03,074 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:34:07,676 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:34:07,677 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.60秒
2025-05-17 11:34:07,677 - app.core.rag_engine - INFO - 查询处理完成，耗时: 5.59秒
2025-05-17 11:34:28,700 - app.api.routes.query - INFO - 接收到查询: 企业版一个月多少钱
2025-05-17 11:34:28,702 - app.core.rag_engine - INFO - 开始处理查询: 企业版一个月多少钱
2025-05-17 11:34:28,702 - app.core.rag_engine - INFO - 开始检索文档: 企业版一个月多少钱
2025-05-17 11:34:28,706 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:34:28,709 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5550120038036157}
2025-05-17 11:34:28,709 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.01秒
2025-05-17 11:34:28,715 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:34:28,715 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:34:32,930 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:34:32,932 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.22秒
2025-05-17 11:34:32,932 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.23秒
2025-05-17 11:34:35,689 - app.api.routes.query - INFO - 接收到查询: 企业版一个月多少钱
2025-05-17 11:34:35,689 - app.core.rag_engine - INFO - 开始处理查询: 企业版一个月多少钱
2025-05-17 11:34:35,689 - app.core.rag_engine - INFO - 开始检索文档: 企业版一个月多少钱
2025-05-17 11:34:35,690 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:34:35,692 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5550120038036157}
2025-05-17 11:34:35,692 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 11:34:35,696 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:34:35,696 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:34:40,202 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:34:40,204 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 4.51秒
2025-05-17 11:34:40,204 - app.core.rag_engine - INFO - 查询处理完成，耗时: 4.52秒
2025-05-17 11:35:06,946 - app.api.routes.query - INFO - 接收到查询: 什么是energy delegation？
2025-05-17 11:35:06,946 - app.core.rag_engine - INFO - 开始处理查询: 什么是energy delegation？
2025-05-17 11:35:07,305 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:35:07,370 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.42秒
2025-05-17 11:35:07,370 - app.core.rag_engine - INFO - 开始检索文档: 什么是energy delegation？
2025-05-17 11:35:07,372 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:35:07,374 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412724_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'a7c5a03d-5136-4c0f-b65a-36a8029fc56b', 'extract_images': False, 'extract_metadata': True, 'file_name': 'a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_path': 'data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:25:23'}, 'similarity': 0.5991982452199264}
2025-05-17 11:35:07,374 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 11:35:07,378 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:35:07,378 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:35:13,854 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:35:13,856 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 6.48秒
2025-05-17 11:35:13,856 - app.core.rag_engine - INFO - 查询处理完成，耗时: 6.91秒
2025-05-17 11:35:40,641 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:35:40,655 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:35:40,656 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:35:40,657 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:35:40,657 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:35:40,795 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:35:40,796 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:35:40,796 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:35:40,796 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:35:40,810 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:35:40,810 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:35:40,810 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:35:40,810 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:35:40,813 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:35:40,813 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:35:40,813 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:35:40,813 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:35:40,813 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:35:40,827 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:35:40,827 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:35:40,827 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:35:40,827 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:35:40,840 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:35:40,840 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:35:40,840 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:35:40,842 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:35:40,842 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:35:40,842 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:35:40,842 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:35:40,842 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:35:40,856 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:35:40,856 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:35:40,857 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:35:40,857 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:35:40,857 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:36:06,259 - app.api.routes.query - INFO - 接收到查询: transfer api
2025-05-17 11:36:06,259 - app.core.rag_engine - INFO - 开始处理查询: transfer api
2025-05-17 11:36:06,615 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:36:06,667 - app.core.embedding.embedding_service - INFO - 嵌入完成: 1 个文本, 耗时: 0.41秒
2025-05-17 11:36:06,667 - app.core.rag_engine - INFO - 开始检索文档: transfer api
2025-05-17 11:36:06,670 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:36:06,674 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412724_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'a7c5a03d-5136-4c0f-b65a-36a8029fc56b', 'extract_images': False, 'extract_metadata': True, 'file_name': 'a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_path': 'data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:25:23'}, 'similarity': 0.7061729481706331}
2025-05-17 11:36:06,674 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.01秒
2025-05-17 11:36:06,681 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:36:06,682 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:36:13,460 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:36:13,461 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 6.78秒
2025-05-17 11:36:13,461 - app.core.rag_engine - INFO - 查询处理完成，耗时: 7.20秒
2025-05-17 11:37:22,819 - app.api.routes.query - INFO - 接收到查询: 测试错误
2025-05-17 11:37:22,819 - app.core.rag_engine - INFO - 开始处理查询: 测试错误
2025-05-17 11:37:23,109 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 11:37:23,173 - app.core.embedding.embedding_service - INFO - 嵌入完成: 2 个文本, 耗时: 0.35秒
2025-05-17 11:37:23,173 - app.core.rag_engine - INFO - 开始检索文档: 测试错误
2025-05-17 11:37:23,174 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 11:37:23,176 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747412724_0', 'text': 'APIInterfaceDocumentation\nTransferScenario\nWhenatransferisneeded,thisAPIshouldbecalledtoobtainenergy.Youcanget\nenergytosendmultipletransactionsinasinglerequest.Pleaseensurethatthe\ntransactionsarecompletedwithin10minutes;otherwise,theenergywillbereclaimed\nafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/transfer\nRequestMethod:POSTapplication/json\nRequestParameters:\n\uf06c key:TheAPIvalidationkeyprovidedbytheprovider.Pleaseensurethatthiskeyis\nstoredsecurelyandnotleaked.\n\uf06c sender:Thesendingaddressforthetransaction,whichneedstheenergy.\n\uf06c count:Anintegervaluerepresentingthenumberoftransactionstobetransferred.\nRequestExample:\nCollectionScenario\nForcollectionscenarios,thisAPIisusedtoobtainenergyandcompletetheaddress\ncollection.Pleaseensurethatthetransactionsarecompletedwithin10minutes;\notherwise,theenergywillbereclaimedafterthe10-minuteperiod.\nAPIDocumentation\nAPIURL:https://gastation.cregis.io/api/tron/collect\nRequestMethod:POSTapplication/json\nRequestParamete', 'metadata': {'author': '宇', 'chunk_count': 3, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'WPS 文字', 'detect_language': True, 'document_id': 'a7c5a03d-5136-4c0f-b65a-36a8029fc56b', 'extract_images': False, 'extract_metadata': True, 'file_name': 'a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_path': 'data/raw/a0269efe-1280-4795-9e66-53c281681336.pdf', 'file_size': 390775, 'file_type': 'pdf', 'filename': 'Energy Service API Description.pdf', 'mime_type': 'application/pdf', 'page_count': 3, 'producer': 'macOS 版本10.15.7（版号19H2026） Quartz PDFContext', 'upload_time': '2025-05-17 00:25:23'}, 'similarity': 0.46769154856340855}
2025-05-17 11:37:23,176 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 11:37:23,179 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 11:37:23,179 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 11:37:26,446 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 11:37:26,448 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 3.27秒
2025-05-17 11:37:26,448 - app.core.rag_engine - INFO - 查询处理完成，耗时: 3.63秒
2025-05-17 11:39:24,335 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:39:24,851 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:39:24,851 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:39:24,851 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:39:24,855 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:39:24,855 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:39:24,855 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:39:24,887 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:39:24,888 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:39:24,888 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:39:25,025 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:39:25,073 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:39:25,073 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:39:25,073 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:39:25,073 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:39:25,088 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:39:25,088 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:39:25,088 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:39:25,088 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:39:25,553 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:39:25,553 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:39:25,553 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:39:28,281 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:39:28,564 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:39:28,564 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:39:28,564 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:39:28,567 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:39:28,567 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:39:28,568 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:39:28,597 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:39:28,597 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:39:28,597 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:39:28,676 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:39:28,707 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:39:28,707 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:39:28,707 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:39:28,707 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:39:28,720 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:39:28,720 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:39:28,720 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:39:28,720 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:39:29,032 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:39:29,032 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:39:29,032 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:40:08,590 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 11:40:08,590 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:40:08,591 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:40:08,591 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:40:08,591 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:40:08,591 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:40:08,591 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:40:08,591 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:40:08,592 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:40:08,592 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:08,611 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:40:08,611 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:40:08,611 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:40:08,611 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:08,625 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:08,625 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:08,625 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:40:08,632 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:08,632 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:40:08,633 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:40:08,633 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:40:08,633 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:08,646 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:08,647 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:08,648 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:08,648 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:40:08,648 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:40:08,659 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:40:08,664 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:40:08,670 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:40:08,676 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 11:40:10,201 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:40:10,202 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:40:10,202 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:40:10,202 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:40:10,202 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:10,241 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:10,241 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:10,241 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:40:10,242 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:10,289 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:40:10,290 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:40:10,290 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:40:10,290 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:40:10,294 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:10,298 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:40:10,303 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:40:10,305 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:40:10,305 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:10,526 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:40:10,526 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:40:10,526 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:40:10,526 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:10,544 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:10,544 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:10,544 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:40:10,546 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:10,546 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:40:10,546 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:40:10,546 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:40:10,546 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:10,615 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:10,615 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:10,617 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:10,617 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:40:10,617 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:40:56,266 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:40:56,643 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:40:56,643 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:40:56,643 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:40:56,646 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:40:56,646 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:40:56,646 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:40:56,676 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:40:56,676 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:40:56,676 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:40:56,786 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:56,826 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:40:56,826 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:40:56,826 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:40:56,826 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:40:56,840 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:40:56,840 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:40:56,840 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:40:56,840 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:40:57,234 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:40:57,234 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:40:57,234 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:41:46,676 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:42:07,003 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:07,003 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:07,003 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:42:07,006 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:07,006 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:07,006 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:42:07,035 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:07,036 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:07,036 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:07,149 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:07,189 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:07,189 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:07,189 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:07,189 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:07,202 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:07,202 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:07,202 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:07,203 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:07,577 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:07,577 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:42:07,577 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:42:11,872 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 11:42:11,873 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:11,873 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:11,873 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:11,873 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:11,873 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:11,873 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:11,873 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:42:11,873 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:42:11,873 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:11,891 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:11,892 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:11,892 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:42:11,892 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:11,907 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:11,907 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:11,908 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:42:11,911 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:11,911 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:42:11,911 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:42:11,911 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:42:11,911 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:11,925 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:11,925 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:11,927 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:11,927 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:42:11,927 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:42:11,928 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('body', 'query'), 'msg': 'Field required', 'input': {'invalid_field': 'test'}}]
2025-05-17 11:42:19,535 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:42:19,536 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:19,536 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:19,536 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:19,536 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:19,552 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:19,552 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:19,552 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:19,552 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:19,565 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:19,565 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:19,565 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:19,565 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:19,567 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:19,567 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:42:19,567 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:42:19,567 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:42:19,567 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:19,580 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:19,580 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:19,581 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:42:19,581 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:19,595 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:19,595 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:19,595 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:42:19,596 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:19,596 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:42:19,596 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:42:19,596 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:42:19,596 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:19,615 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:19,615 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:19,617 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:19,617 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:42:19,617 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:42:37,782 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:42:38,797 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:38,798 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:38,798 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:42:38,811 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:38,811 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:38,811 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:42:38,970 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:38,970 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:38,971 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:39,285 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:39,596 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:39,597 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:39,598 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:39,599 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:39,764 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:39,767 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:39,767 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:39,767 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:41,466 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:41,466 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:42:41,466 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:42:42,001 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:42,001 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:42,001 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:42:42,008 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:42,008 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:42,008 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:42:42,058 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:42,058 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:42,059 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:42,254 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:42,294 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:42,295 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:42,295 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:42,295 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:42,315 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:42,315 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:42,315 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:42,315 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:42,726 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:42,727 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:42:42,727 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:42:43,061 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:43,061 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:43,061 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:42:43,064 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:42:43,064 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:42:43,064 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:42:43,097 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:42:43,097 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:42:43,097 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:42:43,191 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:43,226 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:42:43,226 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:42:43,226 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:42:43,226 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:42:43,241 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:42:43,241 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:42:43,241 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:42:43,241 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:42:43,576 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:42:43,576 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:42:43,576 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:45:39,237 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:45:39,237 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:45:39,237 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:45:39,240 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:45:39,240 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:45:39,240 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:45:39,266 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:45:39,267 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:45:39,267 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:45:39,344 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:45:39,373 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:45:39,373 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:45:39,373 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:45:39,374 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:45:39,386 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:45:39,386 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:45:39,387 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:45:39,387 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:45:39,690 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:45:39,690 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:45:39,690 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:46:06,573 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:46:06,574 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:46:06,574 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:46:06,575 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:46:06,575 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:46:06,608 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:46:06,608 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:46:06,608 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:46:06,623 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:46:06,640 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:46:06,641 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:46:06,641 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:46:06,641 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:46:06,644 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:46:06,644 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:46:06,644 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:46:06,644 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:46:06,644 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:46:06,661 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:46:06,661 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:46:06,661 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:46:06,661 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:46:06,676 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:46:06,676 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:46:06,676 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:46:06,679 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:46:06,679 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:46:06,679 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:46:06,679 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:46:06,679 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:46:06,694 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:46:06,694 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:46:06,697 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:46:06,697 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:46:06,697 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:48:19,891 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:48:20,338 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:48:20,338 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:48:20,338 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:48:20,341 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:48:20,341 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:48:20,341 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:48:20,372 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:48:20,372 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:48:20,372 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:48:20,517 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:48:20,570 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:48:20,570 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:48:20,570 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:48:20,570 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:48:20,589 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:48:20,590 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:48:20,590 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:48:20,590 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:48:21,065 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:48:21,065 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:48:21,065 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:48:23,491 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:48:23,785 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:48:23,785 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:48:23,785 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:48:23,788 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:48:23,788 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:48:23,788 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:48:23,814 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:48:23,814 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:48:23,814 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:48:23,889 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:48:23,919 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:48:23,919 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:48:23,919 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:48:23,919 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:48:23,933 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:48:23,933 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:48:23,933 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:48:23,933 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:48:24,238 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:48:24,238 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:48:24,238 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:48:52,978 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:49:17,111 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:49:17,111 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:49:17,111 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:49:17,114 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:49:17,114 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:49:17,115 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:49:17,141 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:49:17,141 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:49:17,141 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:49:17,220 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:17,250 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:49:17,250 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:49:17,250 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:49:17,250 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:17,263 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:49:17,263 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:49:17,263 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:49:17,263 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:49:17,580 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:49:17,580 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:49:17,580 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:49:18,378 - app.api.routes.admin - INFO - 初始化RAG引擎
2025-05-17 11:49:18,378 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:49:18,378 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:49:18,378 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:49:18,378 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:18,396 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:49:18,396 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:49:18,396 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:49:18,396 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:18,410 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:49:18,410 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:49:18,410 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:49:18,410 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:49:18,412 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:49:18,412 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:49:18,412 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:49:18,412 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 11:49:18,412 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:18,426 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:49:18,426 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:49:18,426 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 11:49:18,426 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:18,441 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:49:18,441 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:49:18,441 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 11:49:18,444 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:49:18,444 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 11:49:18,444 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 11:49:18,444 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 11:49:18,444 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:49:18,458 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:49:18,458 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:49:18,459 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:49:18,459 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 11:49:18,459 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 11:50:05,773 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:50:06,081 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:50:06,081 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:50:06,081 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:50:06,085 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:50:06,085 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:50:06,085 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:50:06,115 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:50:06,115 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:50:06,115 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:50:06,204 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:50:06,236 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:50:06,236 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:50:06,236 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:50:06,236 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:50:06,251 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:50:06,251 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:50:06,251 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:50:06,251 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:50:06,580 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:50:06,580 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:50:06,580 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 11:50:13,755 - app.api.main - INFO - API服务正在关闭...
2025-05-17 11:50:14,053 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:50:14,053 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:50:14,053 - app.api.main - INFO - 已加载 3 个API密钥
2025-05-17 11:50:14,056 - app.utils.env_loader - INFO - 从 .env 成功加载了 3 个环境变量
2025-05-17 11:50:14,056 - app.utils.env_loader - INFO - 已设置 3 个环境变量
2025-05-17 11:50:14,056 - app.utils.env_loader - INFO - 已加载并设置 3 个环境变量
2025-05-17 11:50:14,084 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 11:50:14,084 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 11:50:14,084 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 11:50:14,161 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:50:14,191 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 11:50:14,191 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 11:50:14,191 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 11:50:14,191 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 11:50:14,205 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 11:50:14,205 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 11:50:14,205 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 11:50:14,205 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 11:50:14,546 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 11:50:14,546 - app.core.storage.storage_service - INFO - 存储服务初始化成功
2025-05-17 11:50:14,546 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 12:01:16,458 - app.api.routes.ingest - INFO - 初始化RAG引擎
2025-05-17 12:01:16,459 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 12:01:16,460 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 12:01:16,460 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 12:01:16,460 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 12:01:16,460 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 12:01:16,460 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 12:01:16,460 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 12:01:16,460 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 12:01:16,460 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:16,484 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 12:01:16,484 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 12:01:16,484 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 12:01:16,484 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:16,499 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 12:01:16,499 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 12:01:16,499 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 12:01:16,506 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 12:01:16,506 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 12:01:16,506 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 12:01:16,506 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 12:01:16,506 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:16,522 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 12:01:16,522 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 12:01:16,524 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 12:01:16,524 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 12:01:16,524 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 12:01:16,533 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:16,541 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:16,546 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:16,553 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:20,000 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:20,015 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:20,022 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:20,032 - app.core.retrieval.vector_store - INFO - 已检索 16 个文档的元数据
2025-05-17 12:01:28,515 - app.api.routes.query - INFO - 初始化RAG引擎
2025-05-17 12:01:28,515 - app.core.generation.llm_service - INFO - 初始化LLM服务: 提供商=zhipuai, 模型=glm-4
2025-05-17 12:01:28,516 - app.core.embedding.text_processor - INFO - 已从data/stopwords/chinese_stopwords.txt加载644个停用词
2025-05-17 12:01:28,516 - app.core.embedding.text_processor - INFO - 文本预处理器初始化完成
2025-05-17 12:01:28,516 - app.core.embedding.embedding_service - INFO - 初始化嵌入服务: 提供商=zhipuai, 模型=embedding-3
2025-05-17 12:01:28,516 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=data/chroma
2025-05-17 12:01:28,516 - app.core.storage.storage_service - INFO - 存储服务初始化完成
2025-05-17 12:01:28,516 - app.core.rag_engine - INFO - RAG引擎初始化完成
2025-05-17 12:01:28,516 - app.core.rag_engine - INFO - 确保LLM服务已初始化...
2025-05-17 12:01:28,516 - app.core.generation.llm_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:28,546 - app.core.generation.llm_service - INFO - 初始化智谱AI LLM服务成功, 模型: glm-4
2025-05-17 12:01:28,546 - app.core.generation.llm_service - INFO - LLM服务初始化成功: zhipuai
2025-05-17 12:01:28,546 - app.core.rag_engine - INFO - 确保嵌入服务已初始化...
2025-05-17 12:01:28,546 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:28,565 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 12:01:28,565 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 12:01:28,566 - app.core.retrieval.vector_store - INFO - 初始化Chroma向量存储: 集合=documents, 持久化目录=./data/chroma
2025-05-17 12:01:28,567 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 12:01:28,567 - app.core.ingest.chunker - INFO - 初始化文本分块器: 方法=paragraph, 块大小=1000, 重叠=200
2025-05-17 12:01:28,567 - app.core.ingest.document_processor - INFO - 初始化文档处理器: 支持格式=['pdf', 'txt', 'doc', 'docx', 'md', 'html']
2025-05-17 12:01:28,568 - app.core.ingest.ingest_service - INFO - 初始化文档摄入服务
2025-05-17 12:01:28,568 - app.core.embedding.embedding_service - INFO - 已获取智谱AI API密钥
2025-05-17 12:01:28,583 - app.core.embedding.embedding_service - INFO - 初始化智谱AI嵌入服务，模型: embedding-3
2025-05-17 12:01:28,583 - app.core.embedding.embedding_service - INFO - 嵌入服务初始化成功: zhipuai
2025-05-17 12:01:28,584 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 12:01:28,585 - app.core.ingest.ingest_service - INFO - 文档摄入服务初始化成功
2025-05-17 12:01:28,585 - app.core.rag_engine - INFO - 所有服务初始化完成
2025-05-17 12:01:28,585 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:28,753 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:28,965 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:29,786 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:29,849 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:29,952 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:30,147 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:30,322 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:30,433 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:30,707 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:30,827 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:31,116 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:31,791 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:32,221 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:32,423 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:32,454 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:32,608 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:32,711 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:33,175 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:33,270 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:33,526 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:33,696 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:33,924 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:34,218 - app.api.main - ERROR - 请求验证错误: [{'type': 'missing', 'loc': ('query', 'query'), 'msg': 'Field required', 'input': None}]
2025-05-17 12:01:35,312 - app.api.routes.query - INFO - 接收到查询: 商业版怎么收费
2025-05-17 12:01:35,312 - app.core.rag_engine - INFO - 开始处理查询: 商业版怎么收费
2025-05-17 12:01:35,312 - jieba - DEBUG - Building prefix dict from the default dictionary ...
2025-05-17 12:01:35,313 - jieba - DEBUG - Loading model from cache /var/folders/lj/nhgwx23s147bp382mjd1md0m0000gn/T/jieba.cache
2025-05-17 12:01:35,611 - jieba - DEBUG - Loading model cost 0.299 seconds.
2025-05-17 12:01:35,611 - jieba - DEBUG - Prefix dict has been built successfully.
2025-05-17 12:01:36,137 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 12:01:36,249 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.43秒
2025-05-17 12:01:36,249 - app.core.rag_engine - INFO - 开始检索文档: 商业版怎么收费
2025-05-17 12:01:36,249 - app.core.storage.storage_service - ERROR - 向量存储集合未初始化，尝试重新初始化
2025-05-17 12:01:36,251 - app.core.retrieval.vector_store - INFO - 已连接到现有集合: documents
2025-05-17 12:01:36,259 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 12:01:36,261 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5827169971134732}
2025-05-17 12:01:36,261 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.01秒
2025-05-17 12:01:36,264 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 12:01:36,264 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 12:01:44,912 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 12:01:44,915 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 8.65秒
2025-05-17 12:01:44,916 - app.core.rag_engine - INFO - 查询处理完成，耗时: 9.60秒
2025-05-17 12:01:46,493 - app.api.routes.query - INFO - 接收到查询: 商业版怎么收费
2025-05-17 12:01:46,494 - app.core.rag_engine - INFO - 开始处理查询: 商业版怎么收费
2025-05-17 12:01:46,494 - app.core.rag_engine - INFO - 开始检索文档: 商业版怎么收费
2025-05-17 12:01:46,496 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 12:01:46,500 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5827169971134732}
2025-05-17 12:01:46,500 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.01秒
2025-05-17 12:01:46,507 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 12:01:46,507 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 12:01:54,401 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 12:01:54,403 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 7.90秒
2025-05-17 12:01:54,404 - app.core.rag_engine - INFO - 查询处理完成，耗时: 7.91秒
2025-05-17 12:02:51,075 - app.api.routes.query - INFO - 接收到查询: 企业版一个月多少钱
2025-05-17 12:02:51,076 - app.core.rag_engine - INFO - 开始处理查询: 企业版一个月多少钱
2025-05-17 12:02:51,355 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/embeddings "HTTP/1.1 200 OK"
2025-05-17 12:02:51,419 - app.core.embedding.embedding_service - INFO - 嵌入完成: 3 个文本, 耗时: 0.34秒
2025-05-17 12:02:51,419 - app.core.rag_engine - INFO - 开始检索文档: 企业版一个月多少钱
2025-05-17 12:02:51,420 - chromadb.segment.impl.vector.local_persistent_hnsw - WARNING - Number of requested results 20 is greater than number of elements in index 16, updating n_results = 16
2025-05-17 12:02:51,421 - app.core.retrieval.vector_store - INFO - 第一个文档结构: {'id': 'doc_1747451879_0', 'text': '--- 第 1 页 ---\nCregis价格表总览\n企业版 基础版 商业版功能 单位\n钱包\nMPC单签钱包*\nMPC多签钱包*钱包数 � � ��\n� � � 钱包数\nAPI 服务\n 通过API服务\n发送交易\nTron 能量折扣\n普通交易通过API服务\n 生成的子地址*\n归集\n发送额度$��,���/月\n(超出�.�%)�折 �折 �折\n—\n— —�折 �折子地址数 �� ��� ���\n��� ����� ������ 交易笔数\n价格 （美金）\n月费计划\n年费计划免费$��� $���\n$���� \n(立省$398)$���� \n(立省$998)\n功能\n分片管理 支持 支持 支持\n支持 支持 支持 财务管理\n风控引擎\n团队成员*已配置的策略 � � ��\n� �� �� 同团队的成员\n支持自主Token � � � Token数\n--- 第 2 页 ---\n可额外扩充用量的项目\n单位 数量 价格 （美金）\n子地址\n (月费套餐)通过API服务\n生成的子地址数����\n����\n�����\n�����\n无上限$500\n$1500\n$2500\n$3500\n$6800子地址价格表总览\n单位 价格 （美金）\n额外团队成员 （每月有效） 同团队的成员\n钱包数\n钱包数$9.9\n$99\n$99附加功能\n额外的MPC单签钱包 （永久有效）\n额外的MPC多签钱包 （永久有效）\n钱包数 $500 自动收款/签名 （每月有效）\n--- 第 3 页 ---\n定制化方案\n方案 单位 价格\n錢包\n钱包私有化部署\n钱包私有化部署\n＆\nAPI服务串接自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署\n自托管 或 共管MPC\n风控引擎\n团队管理\n分片管理\n财务管理\n私有云部署 或 服务器机房部署请联系\nCregis销售团队\nAPI服务串接\n--- 第 4 页 ---', 'metadata': {'chunk_count': 2, 'chunk_index': 0, 'chunk_overlap': 200, 'chunk_size': 1000, 'chunker': 'recursive', 'creator': 'Adobe Illustrator 27.5 (Macintosh)', 'detect_language': True, 'document_id': '0fe7d1dc-3f39-49a7-bc73-11fb88bcdd83', 'extract_images': False, 'extract_metadata': True, 'file_name': '6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_path': 'data/raw/6c4b5c20-1b17-43ad-b693-35cbb2fc85e0.pdf', 'file_size': 2070418, 'file_type': 'pdf', 'filename': 'Cregis-价格表单.pdf', 'mime_type': 'application/pdf', 'page_count': 4, 'producer': 'Adobe PDF library 17.00', 'title': 'Cregis-價格表單（简体）', 'upload_time': '2025-05-17 11:17:58'}, 'similarity': 0.5550120038036157}
2025-05-17 12:02:51,421 - app.core.retrieval.vector_store - INFO - 相似度搜索完成, 匹配 16 个文档, 耗时: 0.00秒
2025-05-17 12:02:51,425 - app.core.rag_engine - INFO - 检索完成: 找到 5 个文档片段, 耗时: 0.01秒
2025-05-17 12:02:51,425 - app.core.generation.llm_service - INFO - 开始LLM生成: 模型=glm-4, 温度=0.3
2025-05-17 12:02:59,711 - httpx - INFO - HTTP Request: POST https://open.bigmodel.cn/api/paas/v4/chat/completions "HTTP/1.1 200 OK"
2025-05-17 12:02:59,715 - app.core.generation.llm_service - INFO - LLM生成完成, 耗时: 8.29秒
2025-05-17 12:02:59,715 - app.core.rag_engine - INFO - 查询处理完成，耗时: 8.64秒
